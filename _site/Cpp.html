<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link href="https://fonts.googleapis.com/css?family=Maven+Pro:400,500&amp;subset=latin-ext,vietnamese" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Dancing+Script:400,700&amp;subset=vietnamese" rel="stylesheet">
  <meta name="google-site-verification" content="8zqeFQNuNAWS7ye6oN69hdEeYC_RsDyAlhht79xtAQo" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/assets/res/banner.png" />

  

  <title>
    
      Tutorial di C++ per utenti C | 4Phycs
    
  </title>

  

  <!-- page's cover -->
  
    <meta property="og:image" content="http://localhost:4000/images/defaultCoverPost.png" />
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1234">
    <meta property="og:image:height" content="592">
  

  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
  

  <link rel="shortcut icon" type="image/x-icon" href="/assets/res/favicon.png">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/css/materialize.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="/assets/css/main.css">

  <link rel="stylesheet" href="/assets/css/thi_scss.css">

  
    
      <link rel="stylesheet" href="/assets/css/post.css">
    
  

  

  <link rel="stylesheet" href="/assets/css/syntax.css">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
  <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
  
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Tutorial di C++ per utenti C" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Autore: Eric Brasseur Traduzione in italiano di Paolo Avogadro Qui il link della versione originale (inglese) Qui invece il pdf di questa pagina" />
<meta property="og:description" content="Autore: Eric Brasseur Traduzione in italiano di Paolo Avogadro Qui il link della versione originale (inglese) Qui invece il pdf di questa pagina" />
<link rel="canonical" href="http://localhost:4000/Cpp" />
<meta property="og:url" content="http://localhost:4000/Cpp" />
<meta property="og:site_name" content="4Phycs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-16T00:00:00+01:00" />
<meta name="google-site-verification" content="" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/Cpp"},"description":"Autore: Eric Brasseur Traduzione in italiano di Paolo Avogadro Qui il link della versione originale (inglese) Qui invece il pdf di questa pagina","@type":"BlogPosting","url":"http://localhost:4000/Cpp","headline":"Tutorial di C++ per utenti C","dateModified":"2020-02-16T00:00:00+01:00","datePublished":"2020-02-16T00:00:00+01:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
	<header>
  
    <nav class="top-nav light-blue darken-4">
  <div class="nav-wrapper">
    <div class="container">
      <a class="page-title font-title" href="/">4Phycs</a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a href="/tags">Tags</a></li>
        <li><a href="/categories">Categories</a></li>
        <li><a href="/me">Me</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/contact">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <a href="#" data-activates="slide-out" class="button-collapse top-nav full hide-on-large-only">
    <i class="material-icons">menu</i>
  </a>
</div>
<div id="slide-out" class="side-nav fixed">
  <div>
    <div class="userView thi-userView">
      <div class="background"></div>
        <a href="/">
          <img style="display:inherit;" class="circle z-depth-2" src="/assets/res/user.png">
        </a>
      <span style="font-size: larger;" class="white-text name">Paolo Avogadro</span>
      <span class="white-text email"><a style="color: #bdbdbd;" href="http://"></a></span>
    </div>
  </div>
  <div style="padding: 10px;">
    <form action="/search" method="get">
      <input class="search-sidebar" type="search" name="q"  placeholder="search something?" autofocus>
      <input type="submit" value="Search" style="display: none;">
    </form>
  </div>
  <div id="toc-bar">
    <div class="toc-bar-title">
      In this post
    </div>
    <ol id="toc-sidebar">
  <li><a href="#un-nuovo-modo-di-includere-librerie">Un nuovo modo di includere librerie</a></li>
  <li><a href="#ch:commenti">Nuovi modi per commentare linee di codice</a></li>
  <li><a href="#ch:cout">Nuovi modi per fare leggere comandi da tastiera e scrivere a video</a></li>
  <li><a href="#dichiarazione-delle-variabili">Dichiarazione delle variabili</a></li>
  <li><a href="#inizializzazione-di-una-variabile-con-dei-calcoli">Inizializzazione di una variabile con dei calcoli</a></li>
  <li><a href="#variabile-dichiarate-nella-dichiarazione-di-un-loop">Variabile dichiarate nella dichiarazione di un loop</a></li>
  <li><a href="#accesso-alle-variabili-globali-anche-se-delle-variabili-locali-hanno-lo-stesso-nome">Accesso alle variabili globali, anche se delle variabili locali hanno lo stesso nome</a></li>
  <li><a href="#e-possibile-dichiarare-una-referenza-ad-unaltra-variabile">E’ possibile dichiarare una REFERENZA ad un’altra variabile</a></li>
  <li><a href="#e-possibile-dichiarare-dei-namespace">E’ possibile dichiarare dei namespace</a></li>
  <li><a href="#una-funzione-puo-essere-dichiarata-inline">Una funzione puo’ essere dichiarata inline</a></li>
  <li><a href="#e-stata-aggiunta-la-struttura-exception">E’ stata aggiunta la struttura exception</a></li>
  <li><a href="#e-possibile-definire-valori-di-default-per-gli-argomenti-delle-funzioni">E’ possibile definire valori di default per gli argomenti delle funzioni</a></li>
  <li><a href="#overload-delle-funzioni">Overload delle funzioni</a></li>
  <li><a href="#overload-di-operatori---per-il-loro-utilizzo-con-nuovi-tipi-di-dato">Overload di operatori (+-*/…) per il loro utilizzo con nuovi tipi di dato</a></li>
  <li><a href="#template-funzioni-indipendenti-dal-tipo">Template: funzioni indipendenti dal tipo</a></li>
  <li><a href="#e-meglio-usare-new-e-delete-per-alloccare-e-dealloccare-la-memoria">E’ meglio usare NEW e DELETE per alloccare e dealloccare la memoria</a></li>
  <li><a href="#ch:metodiClassi">Si possono mettere delle funzioni (metodi) in uno Struct o una Classe</a>
    <ol>
      <li><a href="#classi">Classi</a></li>
    </ol>
  </li>
  <li><a href="#ch:copyConstr">Constructor e destructor: inizializzare e distruggere istanze di una classe</a></li>
  <li><a href="#copy-constructor-e-loverload-delloperatore--per-copiare-istanze">COPY constructor e l’overload dell’operatore “=” per copiare istanze</a></li>
  <li><a href="#ch:prototipi">Prototipi: definire i metodi sotto la definizione di una classe</a>
    <ol>
      <li><a href="#per-chi-e-alle-prime-armi">Per chi e’ alle prime armi</a></li>
      <li><a href="#makefile">MAKEFILE</a></li>
    </ol>
  </li>
  <li><a href="#ch:this">This: per puntare all’istanza su cui sta agendo un metodo</a></li>
  <li><a href="#ch:arrayClassi">Array di istanze di classi</a></li>
  <li><a href="#ch:esempioClasse">Esempio di dichiarazione di una classe</a></li>
  <li><a href="#ch:static">Variabili “static” in una classe</a></li>
  <li><a href="#ch:const">Variabili “const” in una classe</a></li>
  <li><a href="#ch:derivazione">E’ possibile DERIVARE un’altra classe da un’altra</a></li>
  <li><a href="#metodi-virtuali">Metodi virtuali</a></li>
  <li><a href="#derivare-una-classe-da-piu-di-una-classe-di-base">Derivare una classe da piu’ di una classe di base</a></li>
  <li><a href="#ch:funzioniGeneriche">Derivazione delle classi e metodi generici</a></li>
  <li><a href="#ch:encapsulation">Encapsulation: public, protected e private</a></li>
  <li><a href="#ch:inout">Brevi cenni all’ Input e output di file</a></li>
  <li><a href="#ch:arrayCh">Array di character possono essere usati come file</a></li>
  <li><a href="#ch:formattare">Un esempio di output formattato</a></li>
</ol>
  </div>
</div>
  
</header>
<main>
  <div class="container">
    <div id="post-info">
      <h3>Tutorial di C++ per utenti C</h3>
      <span>
        Posted on
        <span style="display: initial;" class="cat-class">16/02/2020</span>,
        in
        
          
          
            <a class="cat-class cat-commas" href="/categories#italiano">italiano</a>.
          
        
      </span>
    </div>

    <div class="divider"></div>
    <div class="row thi-post">
      <div class="col s12">
        <hr />
<ul>
  <li>Autore:  Eric Brasseur</li>
  <li>Traduzione in italiano di Paolo Avogadro</li>
  <li>Qui il <a href="http://www.ericbrasseur.org/cppcen.html?i=1">link</a> della versione originale (inglese)</li>
  <li>Qui invece il <a href="/assets/trad30.pdf">pdf</a> di questa pagina</li>
</ul>

<h1 id="un-nuovo-modo-di-includere-librerie">Un nuovo modo di includere librerie</h1>

<p>Esiste un nuovo modo per includere (<span><strong>#include</strong></span>) delle
librerie (il vecchio metodo funziona comunque, ma il compilatore si
lamenta). L’estensione <span><strong>.h</strong></span> non viene piu’ usata, mentre
i nomi delle librerie standard del C devono ora cominciare con la
lettera <span><strong>c</strong></span>. Per fare si’ che il porgramma usi queste
librerie correttamente bisogna aggiungere la seguente linea di comandi:
<span><strong>using namespace std;</strong></span></p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;    // questa e' una libreria chiave del C++ 
#include &lt;cmath&gt;       // questa e' la libreria standard del C chiamata math.h
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="kt">double</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">sin</span> <span class="p">(</span><span class="n">a</span><span class="p">);</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> output:  0.932039
</code></pre></div></div>

<p>Qualche consiglio per chi ha poca esperienza:</p>

<p>Per compilare questo programma, prima va scritto (o copiato) in un
editor di testo (gedit, kwrite, kate, kedit, vi, emacs, nano, pico,
mcedit, Notepad…), il file va salvato e e chiamato, per esempio
<em>test01.cpp</em> (se si e’ proprio dei principianti sarebbe utile mettere il
file all’interno della propria home directory, ovvero per esempio
/home/jones in un sistema di tipo Unix).</p>

<p>Per compilare questo file sorgente, bisogna scrivere questo comando
(sulla maggior parte dei sistemi di tipo Unix) in una console o nella
terminal window:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ test01.cpp -o test01
</code></pre></div></div>

<p>(questo produrra’ un binario eseguibile chiamato <em>test01</em>) per far
girare questo eseguibile prodotto dalla compilazione (supponendo che non
ci siano stati degli errori, nella fase di scrittura o copia), si deve
scrivere:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./test01
</code></pre></div></div>

<p>Ogni volta che si modifica il file sorgente test01.cpp, e’ necessario
compilarlo ancora se si vuole che le modifiche si propaghino
all’eseguibile (per esempio con la freccia cursore in su si puo’
scorrere la lista dei vecchi comandi lanciati).</p>

<h1 id="ch:commenti">Nuovi modi per commentare linee di codice</h1>

<p>E’ possibile usrare <code class="language-plaintext highlighter-rouge">//</code> per indicare che una linea non e’ codice ma un
commento:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>    <span class="c1">// uso del namespace della libreria standard</span>
<span class="cp">#include &lt;iostream&gt;     // la libreria iostream e' molto utile
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>             <span class="c1">// la funzione principale del codice </span>
<span class="p">{</span>
  <span class="kt">double</span> <span class="n">a</span><span class="p">;</span>             <span class="c1">// dichiarazione della variabile a </span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">456</span><span class="p">.</span><span class="mi">47</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">21</span><span class="p">.</span><span class="mi">5</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// un calcolo</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>      <span class="c1">// mostra il contenuto di a</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>               <span class="c1">// fine della funzione </span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>554.611
</code></pre></div></div>

<p>(La possibilita’ di usare <code class="language-plaintext highlighter-rouge">//</code> per i commenti e’ stata aggiunta al C nel
C99 e nell’ ANSI C 2000)</p>

<h1 id="ch:cout">Nuovi modi per fare leggere comandi da tastiera e scrivere a video</h1>

<p>Per interfacciare i comandi da tastiera e a schermo con il codice e’
possibile usare dei nuovi comandi:</p>

<ul>
  <li>
    <p><span><strong><code class="language-plaintext highlighter-rouge"> cout &lt;&lt;</code></strong></span></p>
  </li>
  <li>
    <p><span><strong><code class="language-plaintext highlighter-rouge"> cin &gt;&gt;</code></strong></span></p>
  </li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">;</span>         <span class="c1">// a e' una variabile di tipo integer</span>
  <span class="kt">char</span> <span class="n">s</span> <span class="p">[</span><span class="mi">100</span><span class="p">];</span>  <span class="c1">// s punta a una stringa </span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Questo e' un programma di esempio."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>         <span class="c1">// endl e' identico a \n (end of line)</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Inserisci la tua eta': "</span><span class="p">;</span>
   <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Inserisci il tuo nome: "</span><span class="p">;</span>
   <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">s</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Ciao "</span> <span class="o">&lt;&lt;</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">", hai "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="s">" anni"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">"arrivederci"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Questo e' un programma di esempio.
 Inserisci la tua era':  12
 Inserisci il tuo nome:  Paolo
 
 Ciao Paolo, hai 12 anni
 
 
 arrivederci
</code></pre></div></div>

<h1 id="dichiarazione-delle-variabili">Dichiarazione delle variabili</h1>

<p>Le variabili possono ora essere dichiarate in qualunque parte del
codice:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
<span class="kt">double</span> <span class="n">a</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Ciao, questo e' un programma di prova."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Inserisci il parametro a: "</span><span class="p">;</span>
<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">;</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">c</span><span class="p">;</span>        <span class="c1">// &lt;=========== variabile appena dichiarata</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"c contiene : "</span> <span class="o">&lt;&lt;</span> <span class="n">c</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>        <span class="c1">// &lt;=========== variabili appena dichiarate</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"j contiene : "</span> <span class="o">&lt;&lt;</span> <span class="n">j</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ciao, questo e' un programma di prova.
Inserisci il parametro a: 7
c contiene              : 21
j contiene              : 1
</code></pre></div></div>

<p>E’ consigliabile usare questa caratteristica per rendere il proprio
codice piu’ leggibile, e non piu’ disordinato. Come nel C, le variabili
possono essere incapsulate tramite le parentesi graffe {}. In questo
caso sono locali nello <span><strong>scope</strong></span> definito proprio dalle
parentesi graffe. Quello che succede a tali variabili all’interno della
zona <span><strong>incapsulata</strong></span> non modifica eventuali variabili con
lo stesso nome ma che si trovano all’esterno.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="kt">double</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Inserisci un numero: "</span><span class="p">;</span>
  <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">4</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Numero locale: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Tu hai inserito: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Inserisci un numero: 9
Numero locale:       14
Tu hai inserito:  9
</code></pre></div></div>

<h1 id="inizializzazione-di-una-variabile-con-dei-calcoli">Inizializzazione di una variabile con dei calcoli</h1>

<p>Una variabile puo’ essere inizializzata con un calcolo di altre
variabili, per esempio:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="mi">3</span><span class="p">.</span><span class="mi">25</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span><span class="p">.</span><span class="mi">112</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"a contiene: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"b contiene: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  
  <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"c contiene: "</span> <span class="o">&lt;&lt;</span> <span class="n">c</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a contiene: 39
b contiene: 40.112
c contiene: 4855.82
</code></pre></div></div>

<h1 id="variabile-dichiarate-nella-dichiarazione-di-un-loop">Variabile dichiarate nella dichiarazione di un loop</h1>

<p>Il C++ consente di definire delle variabili <em>locali</em> per un loop:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="n">i</span> <span class="o">=</span> <span class="mi">487</span><span class="p">;</span>                     <span class="c1">// dichiarazione di i</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>  <span class="c1">// dichiarazione locale di i</span>
  <span class="p">{</span>
     <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// questo manda in output 0, 1, 2 e 3</span>
  <span class="p">}</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>     <span class="c1">// questo invece 487</span>
<span class="p">}</span>
<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0
1
2
3
487
</code></pre></div></div>

<p>Nel caso in cui la variabile non sia dichiarata da qualche parte prima
del loop, una persona potrebbe essere tentata di usarla anche dopo il
loop stesso. Alcuni vecchi compilatori accettano questo comportamento.
In quel caso la variabile mantiene l’ultimo valore che aveva alla fine
del loop stesso. E’ molto SCONSIGLIATO usare questo modo di programmare
(viene considerata una <em>bad practice</em>) che puo’ indurre ad errori
difficilmente trovabili).</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
  <span class="p">{</span>
   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
     <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>   <span class="c1">// bad practice</span>
   <span class="n">i</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span>              <span class="c1">// bad practice</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>   <span class="c1">// bad practice </span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>t.cpp: In function ‘int main()’:
t.cpp:12: error: name lookup of ‘i’ changed for new ISO ‘for’ scoping
t.cpp:7: error: using obsolete binding at ‘i’
</code></pre></div></div>

<h1 id="accesso-alle-variabili-globali-anche-se-delle-variabili-locali-hanno-lo-stesso-nome">Accesso alle variabili globali, anche se delle variabili locali hanno lo stesso nome</h1>

<p>Si puo’ accedere ad una variabile globale anche se all’interno di una
funzione si e’ dichiarata un’altra variabile con lo stesso nome.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">128</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
  <span class="p">{</span>
  <span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">256</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Local a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Global a: "</span> <span class="o">&lt;&lt;</span> <span class="o">::</span><span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// nota l'operatore :: </span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Local a: 256
Global a: 128 
</code></pre></div></div>

<h1 id="e-possibile-dichiarare-una-referenza-ad-unaltra-variabile">E’ possibile dichiarare una REFERENZA ad un’altra variabile</h1>

<p>E’ possibile dichiarare una REFERENZA ad un’altra variabile. In pratica
questo fa si’ che una variabile diventi un’altra variabile, e quindi
siano collegate tra loro (si usa per questo il simbolo di refereziazione
&amp;). Detto in altri termini, si costruisce un altro nome della stessa
variabile.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">3</span><span class="p">.</span><span class="mi">1415927</span><span class="p">;</span>
  <span class="kt">double</span> <span class="o">&amp;</span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>                        <span class="c1">// b e' un altro nome per a!</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">89</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"a contiene: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// mostra 89</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a contiene: 89 
</code></pre></div></div>

<p>Se sei abituato ai puntatori e vuoi assolutamente sapere cosa succede,
semplicemente pensalo in questo modo:</p>

<p><code class="language-plaintext highlighter-rouge">double &amp;b  = a</code> =&gt; <code class="language-plaintext highlighter-rouge">double *b= &amp;a</code> e tutti i successivi b sono
rimpiazzati da *b\
Se si e’ creata una referenza da una variabile ad un altra, questo non
puo’ poi essere modificato nel seguito del codice per collegare la
variabile ad una nuova variabile. Per esempio non e’ possibile scrivere,
poche linee dopo, <code class="language-plaintext highlighter-rouge">&amp;b=c</code> ed aspettarci che ora b sia c. Non funziona. La
dichiarazione iniziale definisce una volta per tutte b. La b e a sono
<em>sposate</em> per sempre e nulla le separera’.</p>

<p>Le <span><strong>referenze</strong></span> possono essere usate per consentire ad una
funzione di modificare una variabile chiamante:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">void</span> <span class="nf">change</span> <span class="p">(</span><span class="kt">double</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">,</span> <span class="kt">double</span> <span class="n">s</span><span class="p">)</span>
  <span class="p">{</span>
  <span class="n">r</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
  <span class="n">s</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
  <span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
  <span class="p">{</span>
  <span class="kt">double</span> <span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">;</span>
  <span class="n">k</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="n">m</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="n">change</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">);</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// mostra 100, 4</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>100, 4 
</code></pre></div></div>

<p>Chiaramente lo stesso risultato poteva essere ottenuto tramite i
puntatori in C, in particolare il compilatore C++, se si dovesse
tradurre questo codice in C, scriverebbe:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">void</span> <span class="nf">change</span> <span class="p">(</span><span class="kt">double</span> <span class="o">*</span><span class="n">r</span><span class="p">,</span> <span class="kt">double</span> <span class="n">s</span><span class="p">)</span>
  <span class="p">{</span>
  <span class="o">*</span><span class="n">r</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>      
   <span class="n">s</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
  <span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
  <span class="p">{</span>
  <span class="kt">double</span> <span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">;</span>
  <span class="n">k</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="n">m</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="n">change</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">);</span>       
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// mostra 100, 4</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>100, 4 
</code></pre></div></div>

<p>Una referenza puo’ essere usata per consentire ad una funzione di
restituire una variabile:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">double</span> <span class="o">&amp;</span><span class="n">maggiore</span> <span class="p">(</span><span class="kt">double</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">,</span> <span class="kt">double</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">)</span> <span class="c1">// nota l'operatore &amp; prima di maggiore</span>
<span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&gt;</span> <span class="n">s</span><span class="p">)</span> <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
   <span class="k">else</span>
   <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="kt">double</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"k: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>   <span class="c1">// mostra 3</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"m: "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>   <span class="c1">// mostra 7</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">maggiore</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>    <span class="c1">// ho assegnato un valore alla funzione</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"k: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>   <span class="c1">// mostra  3</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"m: "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>   <span class="c1">// mostra 10</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="n">maggiore</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="o">++</span><span class="p">;</span>     <span class="c1">// aggiungo uno al valore della funzione </span>
                           <span class="c1">//   (dopo averla chiamata)</span>
                           
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"k: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// mostra  3</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"m: "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// mostra 11</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>k: 3
m: 7

k: 3
m: 10

k: 3
m: 11
</code></pre></div></div>

<p>Ancora una volta, se si e’ abituati ai puntatori del C e si domanda come
questa notazione funzioni, basta immaginare che il compilatore traduca
quanto scritto sopra nel seguente codice C standard:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">double</span> <span class="o">*</span><span class="nf">maggiore</span> <span class="p">(</span><span class="kt">double</span> <span class="o">*</span><span class="n">r</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">r</span> <span class="o">&gt;</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span> <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
  <span class="k">else</span>
 <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="kt">double</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
  
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"k: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"m: "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  
  <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">maggiore</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">k</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">m</span><span class="p">)))</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"k: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"m: "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  
  <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">maggiore</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">k</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">m</span><span class="p">)))</span> <span class="o">++</span><span class="p">;</span>
  
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"k: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"m: "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>k: 3
m: 7

k: 3
m: 10

k: 3
m: 11
</code></pre></div></div>

<p>Per finire, per le persone che non amano i puntatori ma devono
interagire con essi, le <span><strong>referenze</strong></span> possono essere utili
per in pratica fare un “un-pointer” delle variabili. Attenzione che
questo tipo di azione puo’ essere considerata una “bad practice” e puo’
creare problemi. Vedasi l’esempio:</p>

<p><a href="https://www.embedded.com/electronics-blogs/programming-pointers/4023307/References-vs-Pointers">https://www.embedded.com/electronics-blogs/programming-pointers/4023307/References-vs-Pointers</a></p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">double</span> <span class="o">*</span><span class="nf">silly_function</span> <span class="p">()</span>  <span class="c1">// questa funzione restituisce un puntatore ad un double</span>
<span class="p">{</span>
  <span class="k">static</span> <span class="kt">double</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">342</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="kt">double</span> <span class="o">*</span><span class="n">a</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">silly_function</span><span class="p">();</span>
  <span class="kt">double</span> <span class="o">&amp;</span><span class="n">b</span> <span class="o">=</span> <span class="o">*</span><span class="n">a</span><span class="p">;</span>   <span class="c1">// ora b e' il double verso cui punta!</span>

  <span class="n">b</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>           <span class="c1">// ottimo!</span>
  <span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span><span class="p">;</span>        <span class="c1">// non c'e' bisogno di scrivere *a ovunque! </span>
  <span class="n">b</span> <span class="o">+=</span> <span class="mi">4</span><span class="p">;</span>

  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Contenuto di *a, b and r: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>contenuto di *a, b e r: 117635 
</code></pre></div></div>

<h1 id="e-possibile-dichiarare-dei-namespace">E’ possibile dichiarare dei namespace</h1>

<p>Si possono dichiarare dei namespace. Le variabili dichiarate entro un
<span><strong>namespace</strong></span> possono essere usate tramite l’operatore ::</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="n">namespace</span> <span class="n">first</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">namespace</span> <span class="n">second</span>
<span class="p">{</span>
  <span class="kt">double</span> <span class="n">a</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">first</span><span class="o">::</span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="n">first</span><span class="o">::</span><span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
   <span class="n">second</span><span class="o">::</span><span class="n">a</span> <span class="o">=</span> <span class="mi">6</span><span class="p">.</span><span class="mi">453</span><span class="p">;</span>
   <span class="n">second</span><span class="o">::</span><span class="n">b</span> <span class="o">=</span> <span class="mf">4.1e4</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">first</span><span class="o">::</span><span class="n">a</span> <span class="o">+</span> <span class="n">second</span><span class="o">::</span><span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">first</span><span class="o">::</span><span class="n">b</span> <span class="o">+</span> <span class="n">second</span><span class="o">::</span><span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 8.453
 41005
</code></pre></div></div>

<h1 id="una-funzione-puo-essere-dichiarata-inline">Una funzione puo’ essere dichiarata inline</h1>

<p>Se una funzione contiene semplici linee di codice e non contiene
<span><strong>for</strong></span> loop o simili, allora puo’ essere dichiarata
<span><strong>inline</strong></span>. Questo implica che il codice della funzione
stessa, al momento della compliazione, verra’ inserito in tutti i luoghi
dove essa viene usata. In pratica diventa simile ad una macro. Il
vantaggio principale e’ che il codice diventa piu’ veloce. Come piccolo
difetto c’e’ il fatto che l’eseguibile diventera’ un po’ piu’ grande
perche’ tutte le linee della funzione verranno ripetute ovunque venga
chiamata.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 
<span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="kr">inline</span> <span class="kt">double</span> <span class="nf">ipotenusa</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="kt">double</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
<span class="c1">// le seguenti due linee producono esattamente lo stesso eseguibile:</span>
 
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ipotenusa</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">k</span> <span class="o">*</span> <span class="n">k</span> <span class="o">+</span> <span class="n">m</span> <span class="o">*</span> <span class="n">m</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10.8167
10.8167
</code></pre></div></div>

<h1 id="e-stata-aggiunta-la-struttura-exception">E’ stata aggiunta la struttura exception</h1>

<p>Oltre alle classiche strutture di controllo del C: <span><strong>for, if, do,
while, switch…</strong></span> nel C++ viene inserita una nuova struttura
chiamata <span><strong>exception</strong></span>:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"inserisci un numero: "</span><span class="p">;</span>
   <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">try</span>
   <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="n">throw</span> <span class="mi">100</span><span class="p">;</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="n">throw</span> <span class="mi">10</span><span class="p">;</span>
       <span class="n">throw</span> <span class="n">a</span> <span class="o">/</span> <span class="mi">3</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">catch</span> <span class="p">(</span><span class="kt">int</span> <span class="n">risultato</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"il risultato e' : "</span> <span class="o">&lt;&lt;</span> <span class="n">risultato</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
       <span class="n">b</span> <span class="o">=</span> <span class="n">risultato</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"b contiene: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="c1">// un altro esempio dell'uso di exception:</span>
   
   <span class="kt">char</span> <span class="n">zero</span> <span class="p">[]</span> <span class="o">=</span> <span class="s">"zero"</span><span class="p">;</span>
   <span class="kt">char</span> <span class="n">pair</span> <span class="p">[]</span> <span class="o">=</span> <span class="s">"pari"</span><span class="p">;</span>
   <span class="kt">char</span> <span class="n">notprime</span> <span class="p">[]</span> <span class="o">=</span> <span class="s">"non primo"</span><span class="p">;</span>
   <span class="kt">char</span> <span class="n">prime</span> <span class="p">[]</span> <span class="o">=</span> <span class="s">"primo"</span><span class="p">;</span>
   
   <span class="n">try</span>
   <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">throw</span> <span class="n">zero</span><span class="p">;</span>
       <span class="k">if</span> <span class="p">((</span><span class="n">a</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">==</span> <span class="n">a</span><span class="p">)</span> <span class="n">throw</span> <span class="n">pair</span><span class="p">;</span>
       <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
       <span class="p">{</span>
          <span class="k">if</span> <span class="p">((</span><span class="n">a</span> <span class="o">/</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">i</span> <span class="o">==</span> <span class="n">a</span><span class="p">)</span> <span class="n">throw</span> <span class="n">notprime</span><span class="p">;</span>
       <span class="p">}</span>
       <span class="n">throw</span> <span class="n">prime</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">catch</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">conclusion</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"il numero che hai inserito e' "</span><span class="o">&lt;&lt;</span> <span class="n">conclusion</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="p">}</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Inserisci un numero: 5
 
 il risultato e': 10
 b  contiene: 11
 
 il numero che hai inserito e' primo
</code></pre></div></div>

<h1 id="e-possibile-definire-valori-di-default-per-gli-argomenti-delle-funzioni">E’ possibile definire valori di default per gli argomenti delle funzioni</h1>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">double</span> <span class="nf">test</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span>  <span class="c1">// se non sepcificato, b=7</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">test</span> <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// mostra a video 14 - 5</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">test</span> <span class="p">(</span><span class="mi">14</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>     <span class="c1">// mostra a video 14 - 7</span>
<span class="p">}</span>
<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 9
 7
</code></pre></div></div>

<h1 id="overload-delle-funzioni">Overload delle funzioni</h1>

<p>Un notevole vantaggio del C e’ la possibilita’ di fare
l’<span><strong>overload</strong></span> delle funzioni. Questo significa che
funzioni differenti possono avere lo <span><strong>stesso nome</strong></span>, basta
che ci sia qualcosa che consenta al compilatore di distinguerle in modo
univoco, per esempio: il <span><strong>numero</strong></span> di parametri, il
<span><strong>tipo</strong></span> dei parametri,…</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">double</span> <span class="nf">test</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">)</span> <span class="c1">// questa funzione prende 2 double e li somma</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">test</span> <span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>     <span class="c1">// questa, invece, prende 2 interi e li sottrae</span>
<span class="p">{</span>                           <span class="c1">// ma ha lo stesso nome, "test", di quella che somma</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="kt">double</span>   <span class="n">m</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>   <span class="n">n</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
   <span class="kt">int</span>      <span class="n">k</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>   <span class="n">p</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">test</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" , "</span> <span class="o">&lt;&lt;</span> <span class="n">test</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>11, 2 
</code></pre></div></div>

<h1 id="overload-di-operatori---per-il-loro-utilizzo-con-nuovi-tipi-di-dato">Overload di operatori (+-*/…) per il loro utilizzo con nuovi tipi di dato</h1>

<p>L’overload di operatori puo’ essere usato per ridefinire dei simboli di
base per lavorare con nuovi tipi di parametri:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="k">struct</span> <span class="n">vettore</span>   <span class="c1">// creo l'oggetto vettore</span>
<span class="p">{</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>
 
<span class="n">vettore</span> <span class="n">operator</span> <span class="o">*</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="n">vettore</span> <span class="n">b</span><span class="p">)</span>  <span class="c1">// </span>
<span class="p">{</span>               <span class="c1">// fa prodotto PER uno scalare e un vettore 2D</span>
   <span class="n">vettore</span> <span class="n">r</span><span class="p">;</span>        
   <span class="n">r</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
   <span class="n">r</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
   <span class="k">return</span> <span class="n">r</span><span class="p">;</span>                            
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">;</span>       <span class="c1">// Non c'e' bisogno di scrivere "struct vettore"</span>
   <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>            <span class="c1">// per essere in grado di scrivere</span>
   <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>           <span class="c1">// k = vettore (2, -1)</span>
                       <span class="c1">// vedi il Cap 19.</span>
   <span class="n">m</span> <span class="o">=</span> <span class="mi">3</span><span class="p">.</span><span class="mi">1415927</span> <span class="o">*</span> <span class="n">k</span><span class="p">;</span>  <span class="c1">// Magia!</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"("</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> (6.28319, -3.14159)
</code></pre></div></div>

<p>Oltre all’operatore di moltiplicazione (*), in C++ ci sono altri 43
operatori di base di cui si puo’ fare overload, tra cui ci sono
<code class="language-plaintext highlighter-rouge">+=, ++</code>, l’array <code class="language-plaintext highlighter-rouge">[]</code>, e cosi’ via…</p>

<p>Tramite un overload, l’operatore <code class="language-plaintext highlighter-rouge">&lt;&lt;</code> normalmente impiegato per lo
shifting binario di interi, puo’ portare all’output di uno stream (per
esempio <span><strong>cout «</strong></span>. E’ possibile fare ulteriori overload
dell’operatore <code class="language-plaintext highlighter-rouge">&lt;&lt;</code>, per l’output di nuovi tipi, come i vettori:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="k">struct</span> <span class="n">vettore</span>
<span class="p">{</span>
  <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>
<span class="n">ostream</span><span class="o">&amp;</span> <span class="n">operator</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">o</span><span class="p">,</span> <span class="n">vettore</span> <span class="n">a</span><span class="p">)</span>  <span class="c1">// tipo in uscita e' un ostream</span>
<span class="p">{</span>
   <span class="n">o</span> <span class="o">&lt;&lt;</span> <span class="s">"("</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span><span class="p">;</span>
   <span class="k">return</span> <span class="n">o</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="n">vettore</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">35</span><span class="p">;</span>
  <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// mostra a video (35,23)</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(35,23)
</code></pre></div></div>

<h1 id="template-funzioni-indipendenti-dal-tipo">Template: funzioni indipendenti dal tipo</h1>

<p>Stanchi di definire la stessa funzione 5 volte? Una definizione per
parametri di tipo <span><strong>int</strong></span>, una nuova definizione per
parametri di tipo <span><strong>double</strong></span>, una per i
<span><strong>float</strong></span>… Non ti sarai dimenticato un tipo? E se dovessi
usare la stessa funzione con un nuovo tipo? Nessun problema il
compilatore C++ puo’ generare automaticamente tutte le versioni delle
funzioni che siano necessarie! Basta specificare come e’ fatta la
funzione dichiarando una funzione <span><strong>template</strong></span>:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span>
<span class="n">template</span> <span class="o">&lt;</span><span class="n">class</span> <span class="n">ttype</span><span class="o">&gt;</span>   
<span class="n">ttype</span> <span class="nf">minimo</span> <span class="p">(</span><span class="n">ttype</span> <span class="n">a</span><span class="p">,</span> <span class="n">ttype</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">ttype</span> <span class="n">r</span><span class="p">;</span>
   <span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">)</span> <span class="n">r</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>  <span class="c1">// gli operatori "&lt;" e "=" devono essere </span>
                      <span class="c1">// definiti per tutti tipi per cui sono usati</span>

   <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>   
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">i3</span><span class="p">;</span>
   <span class="n">i1</span> <span class="o">=</span> <span class="mi">34</span><span class="p">;</span>
   <span class="n">i2</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
   <span class="n">i3</span> <span class="o">=</span> <span class="n">minimo</span> <span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Piu' piccolo: "</span> <span class="o">&lt;&lt;</span> <span class="n">i3</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="kt">double</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">d3</span><span class="p">;</span>
   <span class="n">d1</span> <span class="o">=</span> <span class="mi">7</span><span class="p">.</span><span class="mi">9</span><span class="p">;</span>
   <span class="n">d2</span> <span class="o">=</span> <span class="mi">32</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
   <span class="n">d3</span> <span class="o">=</span> <span class="n">minimo</span> <span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Piu' piccolo: "</span> <span class="o">&lt;&lt;</span> <span class="n">d3</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Piu' piccolo: "</span> <span class="o">&lt;&lt;</span> <span class="n">minimo</span> <span class="p">(</span><span class="n">d3</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Piu' piccolo: 6
Piu' piccolo: 7.9
Piu' piccolo: 3.5
</code></pre></div></div>

<p>La funzione <span><strong>minimo</strong></span> viene usata tre volte nel codice qui
sopra, nondimeno il compilatore C++ genera solo 2 versioni di essa:</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge"> int     minimo(int a   , int    b)</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge"> double  minimo(double a, double b)</code></p>
  </li>
</ul>

<p>Questo e’ sufficiente per tutto il programma. Cosa sarebbe successo se
avessi provato a calcolare qualcosa del tipo
<span><strong>minimo(i1,d1)</strong></span>? (ovvero mettendo un int come primo
ingresso e un double come secondo). Il compilatore avrebbe restituito un
errore. Questo perche’, nella forma scelta nell’esempio, nel
<span><strong>template</strong></span> entrambi i parametri hanno lo stesso tipo. In
genereale, fortunatamente, si puo’ usare un numero arbitrario di tipi
quando si definisce un template che possono essere “tipi” standard
(<span><strong>char, int, double</strong></span>,…) o definiti dall’utente. Qui
sotto c’e’ un esempio dove la funzione minimo accetta parametri di
qualunque tipo (differenti o identici tra loro) e restituisce un valore
di somma che ha lo stesso tipo del primo parametro:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">template</span> <span class="o">&lt;</span><span class="n">class</span> <span class="n">type1</span><span class="p">,</span> <span class="n">class</span> <span class="n">type2</span><span class="o">&gt;</span>  <span class="c1">// tipe1 primo argomento, tipe2 secondo</span>
<span class="n">type1</span> <span class="nf">minimo</span> <span class="p">(</span><span class="n">type1</span> <span class="n">a</span><span class="p">,</span> <span class="n">type2</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">type1</span> <span class="n">r</span><span class="p">,</span> <span class="n">b_convertito</span><span class="p">;</span>      <span class="c1">// dichiara un paio di oggetti di type1</span>
   <span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>                      <span class="c1">// di base prende a come minimo il primo</span>
   <span class="n">b_convertito</span> <span class="o">=</span> <span class="p">(</span><span class="n">type1</span><span class="p">)</span> <span class="n">b</span><span class="p">;</span>   <span class="c1">// fa un cast del secondo parametro nel tipo del primo</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">b_convertito</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">)</span> <span class="n">r</span> <span class="o">=</span> <span class="n">b_convertito</span><span class="p">;</span> <span class="c1">// controlla se il secondo e' minore</span>
   <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">d</span><span class="p">;</span>
   <span class="n">i</span> <span class="o">=</span> <span class="mi">45</span><span class="p">;</span>
   <span class="n">d</span> <span class="o">=</span> <span class="mi">7</span><span class="p">.</span><span class="mi">41</span><span class="p">;</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Piu' piccolo: "</span> <span class="o">&lt;&lt;</span> <span class="n">minimo</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>     <span class="c1">// int    vs double</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Piu' piccolo: "</span> <span class="o">&lt;&lt;</span> <span class="n">minimo</span> <span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>     <span class="c1">// double vs int</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Piu' piccolo: "</span> <span class="o">&lt;&lt;</span> <span class="n">minimo</span> <span class="p">(</span><span class="sc">'A'</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>   <span class="c1">// char   vs int </span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>   
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Piu' piccolo: 7
Piu' piccolo: 7.41
Piu' piccolo: -
</code></pre></div></div>

<p>(Si noti che il codice ASCII per il carattere ’-’ e’ 45, mentre il
codice di ’A’ e’ 65, quindi nel caso dell’operatore <code class="language-plaintext highlighter-rouge">&lt;</code> tra
<span><strong>char</strong></span>, converte automaticamente nel corrispondente
codice ASCII.</p>

<h1 id="e-meglio-usare-new-e-delete-per-alloccare-e-dealloccare-la-memoria">E’ meglio usare NEW e DELETE per alloccare e dealloccare la memoria</h1>

<p>I comandi <span><strong>new</strong></span> e <span><strong>delete</strong></span> possono essere
usati per alloccare e dealloccare la memoria. Sono in qualche modo piu’
puliti rispetto alle funzioni <span><strong>malloc</strong></span> e
<span><strong>free</strong></span> del C standard. Si noti che per gli array si usano
invece:</p>

<ul>
  <li>
    <p><span><strong>new []</strong></span></p>
  </li>
  <li>
    <p><span><strong>delete []</strong></span></p>
  </li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cstring&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
<span class="kt">double</span> <span class="o">*</span><span class="n">d</span><span class="p">;</span>   <span class="c1">// d e' una variabile il cui scopo</span>
             <span class="c1">// e' di contenere l'indirizzo di</span>
             <span class="c1">// memoria dove e' posto un double</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">double</span><span class="p">;</span>  <span class="c1">// new allocca una zona di memoria</span>
                 <span class="c1">// grande abbastanza da contenere un double</span>
                 <span class="c1">// e restituisce il suo indirizzo.</span>
                 <span class="c1">// L'indirizzo e' qunidi messo in d.</span>
             
<span class="o">*</span><span class="n">d</span><span class="o">=</span> <span class="mi">45</span><span class="p">.</span><span class="mi">3</span>        <span class="c1">// Il numero 45.3 e' messo </span>
                <span class="c1">// nella zona di memoria, il cui</span>
                <span class="c1">// indirizzo e' dato da d.</span>


<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Inserisci un numero: "</span><span class="p">;</span>
<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="o">*</span><span class="n">d</span><span class="p">;</span>
<span class="o">*</span><span class="n">d</span> <span class="o">=</span> <span class="o">*</span><span class="n">d</span> <span class="o">+</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Risultato: "</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">d</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
                
                
<span class="n">delete</span> <span class="n">d</span><span class="p">;</span>  <span class="c1">//  delete deallocca la zona </span>
           <span class="c1">//  di memoria il cui indirizzo</span>
           <span class="c1">//  e' dato dal puntatore d</span>
           <span class="c1">//  quell'indirizzo non puo' piu' essere usato</span>


           
<span class="n">d</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">double</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="c1">// allocca una zona per un array di 15 double</span>
                   <span class="c1">// Nota che ognuno dei 15 double viene costruito.</span>
                   <span class="c1">// In questo caso non serve, ma e' fondamentale</span>
                   <span class="c1">// quando si usano dei tipi di dato</span>
                   <span class="c1">// che necessitino che il loro constructor sia </span>
                   <span class="c1">// usato per ogni istanza</span>
                   
<span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">4456</span><span class="p">;</span>
<span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">567</span><span class="p">;</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Contenuto di d[1]: "</span> <span class="o">&lt;&lt;</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

<span class="n">delete</span> <span class="p">[]</span> <span class="n">d</span><span class="p">;</span>       <span class="c1">// delete [] distrugge la zona di memoria</span>
                   <span class="c1">// Nota che ognuno dei 15 ingressi di tipo</span>
                   <span class="c1">// double verra' distrutto. Anche in questo</span>
                   <span class="c1">// caso, ora non e' importante, ma al momento in</span>
                   <span class="c1">// cui verranno usati i destructor per le istanze</span>
                   <span class="c1">// delle classi (il metodo ~). Se venisse usato</span>
                   <span class="c1">// delete senza mettere le parentesi quadre</span>
                   <span class="c1">// questo provocherebbe la dealloccazione della</span>
                   <span class="c1">// zona di memoria, senza distruggere ognuna delle 15 istanze</span>
                   <span class="c1">// Questo comportamento puo' causare un memory leakage.</span>

<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">double</span><span class="p">[</span><span class="n">n</span><span class="p">];</span> <span class="c1">// new puo' essere usato per alloccare un array </span>
                   <span class="c1">// dinamicamente, ad una grandezza n </span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
                
<span class="n">delete</span> <span class="p">[]</span> <span class="n">d</span><span class="p">;</span>

<span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span>    
<span class="n">s</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>

<span class="n">strcpy</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">"Ciao!"</span><span class="p">);</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

<span class="n">delete</span> <span class="p">[]</span> <span class="n">s</span><span class="p">;</span>
            
<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>           
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Inserisci un numero: 6
Risultato: 11
Contenuto di d[1]: 5023
Ciao!
</code></pre></div></div>

<h1 id="ch:metodiClassi">Si possono mettere delle funzioni (metodi) in uno Struct o una Classe</h1>

<p>Nel C standard, uno <span><strong>struct</strong></span> contiene solo dati. In C++,
uno <span><strong>struct</strong></span> puo’ contenere anche delle funzioni. Queste
funzioni sono possedute dallo <span><strong>struct</strong></span> e sono pensate per
operare sui dati dello <span><strong>struct</strong></span> stesso. Queste funzioni
sono chiamate <span><strong>METODI</strong></span>. Nel seguito viene mostrato il
metodo <span><strong>superficie</strong></span> associato allo struct
<span><strong>vettore</strong></span>:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="k">struct</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">superficie</span> <span class="p">()</span> <span class="c1">// intesa come rettangolo di cui il vettore e' diagonale</span>
   <span class="p">{</span>
      <span class="kt">double</span> <span class="n">s</span><span class="p">;</span>
      <span class="n">s</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="n">s</span><span class="p">;</span>
      <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">};</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">a</span><span class="p">;</span>
   <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
   <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
 
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"La superficie di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>La superficie di a: 12 
</code></pre></div></div>

<p>Nell’esempio qui sopra <span><strong>a</strong></span> e’ un’
<span><strong>istanza</strong></span> dello struct “vettore”. (Si noti che il comando
“<span><strong>struct</strong></span>” non era necessario quando si e’ dichiarato il
vettore <span><strong>a</strong></span>).</p>

<p>Proprio come per le funzioni, un metodo puo’ essere un overload di
qualsiasi operatore del C++, puo’ avere un numero arbitrario di
parametri (ma uno di questi parametri e’ implicito: l’istanza su cui
agisce), restituire qualunque tipo di parametri o nessuno (un metodo e’
una funzione…).</p>

<h2 id="classi">Classi</h2>

<ul>
  <li>
    <p>Cos’e’ una <span><strong>class</strong></span> (classe)?</p>
  </li>
  <li>
    <p>Una <span><strong>classe</strong></span> e’ una <span><strong>struct</strong></span> che
mantiene i propri dati <span><strong>nascosti</strong></span>.</p>
  </li>
  <li>
    <p>solo i metodi della classe possono accedere ai dati. Non e’
possibile accedere ai dati di una classe direttamente, a meno che
questi siano stati definiti tramite la direttiva:
<span><strong>public</strong></span>.</p>
  </li>
</ul>

<p>Qui sotto c’e’ un esempio della <span><strong>definizione</strong></span> di una
<span><strong>classe</strong></span>, che si comporta esattamente come lo struct
sopra perche’ i dati <span><strong>x</strong></span> e <span><strong>y</strong></span> sono
definiti come public:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
  
   <span class="kt">double</span> <span class="n">superficie</span> <span class="p">()</span>
   <span class="p">{</span>
      <span class="kt">double</span> <span class="n">s</span><span class="p">;</span>
      <span class="n">s</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="n">s</span><span class="p">;</span> 
      <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">};</span>         


<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">a</span><span class="p">;</span>
   <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
   <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"La superficie di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>La superficie di a: 12 
</code></pre></div></div>

<p>Nell’esempio qui sopra, direttamente dal <span><strong>main</strong></span> e’
possibile modificare i dati dell’istanza del vettore, usando:</p>

<ul>
  <li>
    <p><span><strong>a.x=3</strong></span></p>
  </li>
  <li>
    <p><span><strong>a.y=4</strong></span></p>
  </li>
</ul>

<p>Questo e’ stato possibile per la direttiva <span><strong>public:</strong></span>
usata nella definizione della classe. <span><strong>L’uso della public e’
considerata bad practice! si veda il Capitolo 30.</strong></span></p>

<p>Ad un metodo e’ consentito cambiare le variabili dell’istanza su cui
agisce:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
  <span class="nl">public:</span>
  <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>    <span class="c1">// parametri della classe (accessibili dall'esterno per il public)</span>
  <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>    <span class="c1">// parametri della classe (             "                        )</span>

  <span class="n">vettore</span> <span class="n">costruisci_opposto</span><span class="p">()</span> <span class="c1">// metodo che RESTITUISCE l'opposto dell'istanza</span>
  <span class="p">{</span>                            <span class="c1">// nota che questo metodo ha un "tipo"</span>
     <span class="n">vettore</span> <span class="n">r</span><span class="p">;</span>                <span class="c1">// e' proprio la stessa classe!  </span>
     <span class="n">r</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span><span class="p">;</span>
     <span class="n">r</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="n">y</span><span class="p">;</span>
     <span class="k">return</span> <span class="n">r</span><span class="p">;</span> 
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">trasforma_in_opposto</span><span class="p">()</span>    <span class="c1">// metodo che TRASFORMA l'istanza nel suo opposto</span>
  <span class="p">{</span>                      <span class="c1">// e' un metodo VOID, non restituisce nulla!</span>
      <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span><span class="p">;</span>            <span class="c1">// trasforma soltanto l'istanza su cui agisce </span>
      <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="n">y</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kt">void</span> <span class="n">da_calcolare</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">,</span> <span class="kt">double</span> <span class="n">c</span><span class="p">,</span> <span class="kt">double</span> <span class="n">d</span><span class="p">)</span> 
                        <span class="c1">// metodo che MODIFICA l'istanza</span>
  <span class="p">{</span>                     <span class="c1">// (e' void)</span>
     <span class="n">x</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">c</span><span class="p">;</span>         <span class="c1">// ATTENZIONE non c'e' un return...</span>
     <span class="n">y</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">d</span><span class="p">;</span>         <span class="c1">// </span>
  <span class="p">}</span>
  
  <span class="n">vettore</span> <span class="n">operator</span> <span class="o">*</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">)</span> <span class="c1">// overload del prodotto</span>
  <span class="p">{</span>                      <span class="c1">// occhio che non e' come un metodo normale</span>
     <span class="n">vettore</span> <span class="n">r</span><span class="p">;</span>          <span class="c1">// in cui gli argomenti vanno messi tra tonde ()</span>
     <span class="n">r</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>        <span class="c1">// l'istanza della classe va messa prima del *  </span>
     <span class="n">r</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>        <span class="c1">// il double va messo dopo. NON si usano le parentesi</span>
     <span class="k">return</span> <span class="n">r</span><span class="p">;</span>           <span class="c1">// crea una NUOVA istanza  </span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
   <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
   <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">costruisci_opposto</span><span class="p">();</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Vector a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Vector b: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">b</span><span class="p">.</span><span class="n">trasforma_in_opposto</span><span class="p">();</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Vector b: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
 
   <span class="n">a</span><span class="p">.</span><span class="n">da_calcolare</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Vector a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>     <span class="c1">// questo e' istruttivo, avendo fatto</span>
                  <span class="c1">//l'OVERLOAD del *, il primo ingresso</span>
                  <span class="c1">//sara' un vettore, il secondo un double</span>
                  <span class="c1">// che era tra parentesi nella definizione del</span>
                  <span class="c1">// metodo. Nessuno degli "ingressi" dell'</span>
                  <span class="c1">// operatore, va messo tra parentesi (), si</span>
                  <span class="c1">// continua ad usare il * come al solito</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Vector a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">costruisci_opposto</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Vector a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"x dell'opposto di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">trasforma_in_opposto</span><span class="p">().</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Vector a: 3, 5
Vector b: -3, -5
Vector b: 3, 5
Vector a: 4, 6
Vector a: 6, 10
Vector a: -6, -10
x dell'opposto di a: 6 
</code></pre></div></div>

<h1 id="ch:copyConstr">Constructor e destructor: inizializzare e distruggere istanze di una classe</h1>

<p>Esistono dei metodi speciali ed essenziali che sono i:</p>

<ul>
  <li>
    <p><span><strong>constructor</strong></span> (costruttore)</p>
  </li>
  <li>
    <p><span><strong>destructor</strong></span> (distruttore)</p>
  </li>
</ul>

<p>Questi metodi vengono chiamati automaticamente nei seguenti casi:</p>

<ul>
  <li>
    <p>al momento di creazione di un’istanza della classe (p.es. con un
<span><strong>new</strong></span>)</p>
  </li>
  <li>
    <p>al momento di distruzione di un’istanza della classe (con un
<span><strong>delete</strong></span>)</p>
  </li>
  <li>
    <p>alla fine del programma</p>
  </li>
  <li>
    <p>…</p>
  </li>
</ul>

<p>Il costruttore (<span><strong>constructor</strong></span>) (e’ un metodo con lo
<span><strong>stesso nome</strong></span> della classe):</p>

<ul>
  <li>
    <p>inizializzera’ le variabili dell’istanza</p>
  </li>
  <li>
    <p>fara’ dei calcoli (definiti nella classe)</p>
  </li>
  <li>
    <p>allocchera’ della memoria</p>
  </li>
  <li>
    <p>mandera’ a video delle scritte</p>
  </li>
  <li>
    <p>…</p>
  </li>
</ul>

<p>In generale il costruttore viene scritto per fare tutto quello che e’
necessario per la classe. Nel seguito vediamo un esempio della
definizione di una classe con due costruttori di cui viene fatto
l’overload (sono funzioni… quindi si puo’ fare l’overload dei
costruttori):</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

   <span class="n">vettore</span> <span class="p">()</span>  <span class="c1">// questo e' un costruttore, lo si riconosce </span>
   <span class="p">{</span>          <span class="c1">// perche' ha lo stesso NOME della classe</span>
      <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// se viene fatta una istanza senza indicare</span>
      <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// le componenti, questo le mette a 0 di default</span>
   <span class="p">}</span>

   <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">)</span> <span class="c1">// anche questo e' un costruttore </span>
   <span class="p">{</span>                           <span class="c1">// ed e' un overload, perche' questo</span>
       <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>                  <span class="c1">// viene chiamato con 2 argomenti  </span>
       <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>                  <span class="c1">// in particolare 2 double</span>
   <span class="p">}</span>                           <span class="c1">// che diventeranno le componenti </span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">k</span><span class="p">;</span>            <span class="c1">// il costruttore vettore () viene chiamato</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"vettore k: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">vettore</span> <span class="n">m</span> <span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>    <span class="c1">// qui viene chiamato vettore (double, double)</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"vettore m: "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">k</span> <span class="o">=</span> <span class="n">vettore</span> <span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// viene creato un vettore, copiato  in k,</span>
                        <span class="c1">// e poi cancellato </span>
                        <span class="c1">// perche' viene cancellato? perche' finisce l'esecuzione</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"vettore k: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vettore k: 0, 0

vettore m: 45, 2

vettore k: 23, 2 
</code></pre></div></div>

<p>La buona pratica di scrittura di un codice suggerisce di non fare
l’overload dei costruttori. Sarebbe meglio dichiarare solo un
costruttore e dargli dei valori di default quando possibile.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
   
   <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">k</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"vettore k: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="n">vettore</span> <span class="n">m</span> <span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"vettore m: "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">vettore</span> <span class="n">p</span> <span class="p">(</span><span class="mi">3</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"vettore p: "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>   
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vettore k: 0, 0

vettore m: 45, 2

vettore p: 3, 0 
</code></pre></div></div>

<p>Il distruttore e’ spesso non necessario. Puo’ essere usato per fare dei
calcoli quando l’istanza viene distrutta o per mandare a video dei testi
per il debug. Se pero’ le variabili dell’istanza puntano a qualche area
di memoria alloccata, allora il ruolo del distruttore e’ essenziale:
<span><strong>deve liberare la memoria</strong></span>! Qui vediamio un esempio di un
tale utilizzo:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cstring&gt;
</span><span class="n">class</span> <span class="n">persona</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">anni</span><span class="p">;</span>
   <span class="n">persona</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">n</span> <span class="o">=</span> <span class="s">"nessun nome"</span><span class="p">,</span> <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1">// costruttore</span>
   <span class="p">{</span>
      <span class="n">nome</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">char</span> <span class="p">[</span><span class="mi">100</span><span class="p">];</span>  <span class="c1">// new e' meglio di malloc!</span>
      <span class="n">strcpy</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
      <span class="n">anni</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Instanza inizializzata, 100 bytes allocati"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="o">~</span><span class="n">persona</span> <span class="p">()</span>  <span class="c1">// DISTRUTTORE, c'e' la ~ davanti al nome!</span>
   <span class="p">{</span>
       <span class="n">delete</span> <span class="p">[]</span> <span class="n">nome</span><span class="p">;</span> <span class="c1">// invece che un semplice free, uso delete</span>
                       <span class="c1">// si noti che potrebbe funzionare con un</span>
                       <span class="c1">// semplice delete senza  le [], questo </span>
                       <span class="c1">// perche' l'array non contiene C++ sub-oggetti</span>
                       <span class="c1">// che debbano essere cancellati. Pero', visto che</span>
                       <span class="c1">// il comportamento senza le [] non e' definito, e'</span>
                       <span class="c1">// meglio andare sul sicuro e mettere le quadre.</span>

       <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"L'istanza viene rimossa, 100 byte vengono liberati"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">};</span>        <span class="c1">// fine della definizione della classe</span>



<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Ciao!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">persona</span> <span class="n">a</span><span class="p">;</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">persona</span> <span class="n">b</span> <span class="p">(</span><span class="s">"John"</span><span class="p">);</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
                       
   <span class="n">b</span><span class="p">.</span><span class="n">anni</span> <span class="o">=</span> <span class="mi">21</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">persona</span> <span class="n">c</span> <span class="p">(</span><span class="s">"Miki"</span><span class="p">,</span> <span class="mi">45</span><span class="p">);</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">c</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">c</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Ciao ciao!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ciao!

L'istanza viene inizializzata, 100 byte allocati
nessun nome, anni 0

L'istanza viene inizializzata, 100 byte allocati
John, anni 0

John, anni 21

L'istanza viene inizializzata, 100 byte alloccati
Miki, anni 45

Ciao ciao!

L'istanza viene rimossa, 100 byte vengono liberati
L'istanza viene rimossa, 100 byte vengono liberati
L'istanza viene rimossa, 100 byte vengono liberati
</code></pre></div></div>

<p>Qui invece verra’ mostrato un breve esempio di una definizione di una
classe chiamata “array”. C’e’ poi un metodo che e’ un overload
dell’operatore <span><strong>[]</strong></span> e restituisce come valore una
referenza (<span><strong>&amp;</strong></span>) ed e’ usato per generare un errore se si
tenta di accedere a dati al di fuori dei limiti dell’array.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cstdlib&gt;
</span><span class="n">class</span> <span class="n">array</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>
   <span class="kt">double</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
   <span class="n">array</span> <span class="p">(</span><span class="kt">int</span> <span class="n">s</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">size</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span>
      <span class="n">data</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">double</span> <span class="p">[</span><span class="n">s</span><span class="p">];</span>
   <span class="p">}</span>
   <span class="o">~</span><span class="n">array</span> <span class="p">()</span>
   <span class="p">{</span>
      <span class="n">delete</span> <span class="p">[]</span> <span class="n">data</span><span class="p">;</span>
   <span class="p">}</span>
   
   <span class="kt">double</span> <span class="o">&amp;</span><span class="n">operator</span> <span class="p">[]</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="c1">// overload dell'operatore []</span>
   <span class="p">{</span>                           <span class="c1">// restituisce un double </span>
      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">size</span><span class="p">)</span>  <span class="c1">// ha come parametro di ingresso un intero</span>
      <span class="p">{</span>
          <span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">"Fuori dai limiti"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
          <span class="n">exit</span> <span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">return</span> <span class="n">data</span> <span class="p">[</span><span class="n">i</span><span class="p">];</span>
   <span class="p">}</span>
<span class="p">};</span>


<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">array</span> <span class="n">t</span> <span class="p">(</span><span class="mi">5</span><span class="p">);</span>         <span class="c1">// OK</span>
   <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">45</span><span class="p">;</span>           <span class="c1">// Ok</span>
   <span class="n">t</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">6</span><span class="p">;</span>     <span class="c1">// Ok </span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">t</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">t</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>           <span class="c1">// ERRORE!</span>
    
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 51
 
 Fuori dai limiti
</code></pre></div></div>

<h1 id="copy-constructor-e-loverload-delloperatore--per-copiare-istanze">COPY constructor e l’overload dell’operatore “=” per copiare istanze</h1>

<p>Se si copia un oggetto come un vettore, non c’e’ nessun problema. Per
esempio, se si ha il vettore <span><strong>k</strong></span>, di coordinate
<span><strong>(4,7)</strong></span>, dopo averlo copiato <span><strong>m=k</strong></span>, il
vettore <span><strong>m</strong></span> conterra’ anche lui coordinate
<span><strong>(4,7)</strong></span>. I valori di <span><strong>k.x</strong></span> e
<span><strong>k.y</strong></span> sono stati semplicemente copiati in
<span><strong>m.x</strong></span> e <span><strong>m.y</strong></span>.</p>

<p>Supponiamo ora che si stia usando un oggetto come la classe
<span><strong>persona</strong></span> definita precedentemente. Questo tipo di
oggetti contiene un <span><strong>puntatore</strong></span> ad una stringa di
caratteri. Se si fa la copia dell’oggetto <span><strong>persona</strong></span>
scrivendo <span><strong>p=r</strong></span> diventa necessario che qualche funzione
si incarichi di produrre una copia corretta da <span><strong>p</strong></span> a
<span><strong>r</strong></span>. Altrimenti, <span><strong>p.nome</strong></span> puntera’ alla
stessa stringa di <span><strong>r.nome</strong></span>.</p>

<p>Inoltre la precedente stringa puntata da <span><strong>p.nome</strong></span> e’
persa e diventa un o zombi di memoria. Il risultato sarebbe
catastrofico, un disastro di puntatori e dati persi. I metodi che
risolvono questo tipo di problemi sono:</p>

<ul>
  <li>
    <p>COPY constructor</p>
  </li>
  <li>
    <p>un overload dell’operatore =</p>
  </li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cstring&gt;
</span><span class="n">class</span> <span class="n">persona</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">anni</span><span class="p">;</span>
   <span class="n">persona</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">n</span> <span class="o">=</span> <span class="s">"nessun nome"</span><span class="p">,</span> <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1">// costruttore</span>
   <span class="p">{</span>
      <span class="n">name</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
      <span class="n">strcpy</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
      <span class="n">anni</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
   <span class="p">}</span>
   
   <span class="n">persona</span> <span class="p">(</span><span class="k">const</span> <span class="n">persona</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">)</span>  <span class="c1">// l'argomento di constructor e' un oggetto </span>
   <span class="p">{</span>                           <span class="c1">// di tipo "persona"</span>
      <span class="n">name</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>    <span class="c1">// allocca della nuova memoria</span>
      <span class="n">strcpy</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">nome</span><span class="p">);</span> <span class="c1">// copia il nome dell'oggetto passato come nuovo nome</span>
      <span class="n">anni</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">anni</span><span class="p">;</span>    <span class="c1">// mette come eta' quella della "persona" in argomento  </span>
   <span class="p">}</span>
   
   <span class="n">persona</span><span class="o">&amp;</span> <span class="n">operator</span><span class="o">=</span> <span class="p">(</span><span class="k">const</span> <span class="n">persona</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">)</span> <span class="c1">// overload dell' =, restituisce </span>
   <span class="p">{</span>                                     <span class="c1">// un oggetto di tipo persona e prende</span>
      <span class="n">strcpy</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">nome</span><span class="p">);</span>             <span class="c1">// come argomento un oggetto persona</span>
      <span class="n">anni</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">anni</span><span class="p">;</span>                     <span class="c1">// associa l'eta' dell'argomento</span>
      <span class="k">return</span> <span class="o">*</span><span class="n">this</span><span class="p">;</span>                <span class="c1">// restituisce l'istanza appena costruita</span>
    <span class="p">}</span>
    
    <span class="o">~</span><span class="n">persona</span> <span class="p">()</span>  <span class="c1">// DISTRUTTORE</span>
    <span class="p">{</span>
       <span class="n">delete</span> <span class="p">[]</span> <span class="n">name</span><span class="p">;</span>            <span class="c1">// l'unica quantita' alloccata era per il nome</span>
    <span class="p">}</span>
<span class="p">};</span>            


<span class="kt">void</span> <span class="nf">modifica_persona</span> <span class="p">(</span><span class="n">persona</span><span class="o">&amp;</span> <span class="n">h</span><span class="p">)</span>  <span class="c1">// nota che questa e' una funzione</span>
                                    <span class="c1">// NON e' un metodo!</span>
<span class="p">{</span>                                  
   <span class="n">h</span><span class="p">.</span><span class="n">anni</span> <span class="o">+=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// semplicemente modifica la "persona" passata</span>
<span class="p">}</span>

<span class="n">persona</span> <span class="nf">calcola_persona</span> <span class="p">(</span><span class="n">persona</span> <span class="n">h</span><span class="p">)</span> 
<span class="p">{</span>                                     
   <span class="n">h</span><span class="p">.</span><span class="n">anni</span> <span class="o">+=</span> <span class="mi">7</span><span class="p">;</span>
   <span class="k">return</span> <span class="n">h</span><span class="p">;</span>
<span class="p">}</span>

 
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">persona</span> <span class="n">p</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="c1">// output: nessun nome, anni 0</span>
   
   <span class="n">persona</span> <span class="n">k</span> <span class="p">(</span><span class="s">"John"</span><span class="p">,</span> <span class="mi">56</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="c1">// output: John, anni 56</span>
   
   <span class="n">p</span> <span class="o">=</span> <span class="n">k</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="c1">// output: John, anni 56</span>
   
   <span class="n">p</span> <span class="o">=</span> <span class="n">persona</span> <span class="p">(</span><span class="s">"Bob"</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="c1">// output: Bob, anni 10 </span>
   
   <span class="c1">// Ne il copy constructor ne l'overload </span>
   <span class="c1">// dell' = sono necessari per l'operazione che modifica </span>
   <span class="c1">// p dato (che faremo qui sotto) che solo la referenza verso p</span>
   <span class="c1">// e' passata alla funzione modifica_persona   </span>
   <span class="n">modifica_persona</span> <span class="p">(</span><span class="n">p</span><span class="p">);</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="c1">// output: Bob, anni 17</span>
   
   <span class="c1">// Il copy constructor e' chiamato per passare una</span>
   <span class="c1">// copia completa di p alla funzione calcola_persona.</span>
   <span class="c1">// La funzione usa quella copia per fare i suoi calcoli</span>
   <span class="c1">// poi una copia di quella copia modificata viene fatta per </span>
   <span class="c1">// restituire i risultati. In fine l'overload dell'=</span>
   <span class="c1">// viene chiamato per incollare la seconda copia dentro k</span>
   
   <span class="n">k</span> <span class="o">=</span> <span class="n">calcola_persona</span> <span class="p">(</span><span class="n">p</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="c1">// output: Bob, anni 17</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">nome</span> <span class="o">&lt;&lt;</span> <span class="s">", anni "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">anni</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="c1">// output: Bob, anni 24</span>
   
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nessun nome, anni 0

John, anni 56

John, anni 56

Bob, anni 10

Bob, anni 17

Bob, anni 17

Bob, anni 24
</code></pre></div></div>

<p>Il copy constructor consente al programma di fare copie delle istanze
quando ci sono dei calcoli. E’ un metodo chiave. Durante i calcoli, le
istanze sono create per mantenere i riultati intermedi. Sono modificate,
copiate e distrutte senza che il programmatore lo noti. Questo e’ il
motivo per cui questi metodi sono utili anche per oggetti semplici (vedi
Capitolo 14).</p>

<p>In tutti gli esempi sopra, i metodi sono definiti all’interno delle
definizioni delle classi. Questo implica che sono automaticamente dei
metodi <span><strong>inline</strong></span>.</p>

<h1 id="ch:prototipi">Prototipi: definire i metodi sotto la definizione di una classe</h1>

<p>Consideriamo i seguenti casi:</p>

<ul>
  <li>
    <p>se un metodo non puo’ essere inline (per esempio perche’ ha un loop
al suo interno)</p>
  </li>
  <li>
    <p>se non si vuole che il metodo diventi inline (per non ingrandire
troppo l’eseguibile)</p>
  </li>
  <li>
    <p>se si vuole che la definizione di una classe contenga solo un
“riassunto” dei metodi in modo che sia leggibile</p>
  </li>
  <li>
    <p>se, semplicemente, si vuole separare l’header file .h dal sorgente
.cpp</p>
  </li>
</ul>

<p>allora:</p>

<ol>
  <li>
    <p>nella classe si inserisce solo il <span><strong>prototipo</strong></span>
(prototype) del metodo</p>
  </li>
  <li>
    <p>il metodo stesso va definito <span><strong>sotto</strong></span> la definizione
della classe stessa o in un file sorgente .cpp separato</p>
  </li>
</ol>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

   <span class="kt">double</span> <span class="n">superficie</span><span class="p">();</span> <span class="c1">// il ; e il fatto che non ci siano {} mostra che e' un prototipo</span>
<span class="p">};</span>                      <span class="c1">// &lt;=== fine della definizione della classe </span>


<span class="kt">double</span> <span class="n">vettore</span><span class="o">::</span><span class="n">superficie</span><span class="p">()</span>  <span class="c1">// qui sotto definisco esplicitamente il metodo</span>
<span class="p">{</span>
   <span class="kt">double</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">for</span> <span class="p">(</span><span class="kt">double</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">y</span><span class="p">;</span>  <span class="c1">// e' una specie di modo per fare il prodotto</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
<span class="p">}</span>


<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">k</span><span class="p">;</span>
   <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
   <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Superficie: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Superficie: 20 
</code></pre></div></div>

<h2 id="per-chi-e-alle-prime-armi">Per chi e’ alle prime armi</h2>

<p>Se volete sviluppare un codice C o C++ serio, avete bisogno di separare
il file sorgente in:</p>

<ul>
  <li>
    <p>uno (o piu’) file header <span><strong>.h</strong></span></p>
  </li>
  <li>
    <p>uno (o piu’) file sorgente <span><strong>.cpp</strong></span></p>
  </li>
</ul>

<p>Qui c’e’ un breve esempio di come questo viene fatto. Il programma qui
sopra viene diviso in 3 file:</p>

<ol>
  <li>
    <p><span><strong>vettore.h</strong></span> contenente la classe e i prototipi dei
metodi</p>
  </li>
  <li>
    <p><span><strong>vettore.cpp</strong></span> dove vengono definiti i metodi della
classe vettore</p>
  </li>
  <li>
    <p><span><strong>main.cpp</strong></span> dov c’e’ il main</p>
  </li>
</ol>

<p>il file header <span><strong>vettore.h</strong></span> e’:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span> 
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

   <span class="kt">double</span> <span class="n">superficie</span><span class="p">();</span>
<span class="p">};</span> 
</code></pre></div></div>

<p>Il file sorgente <span><strong>vettore.cpp</strong></span>:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include "vettore.h"
</span><span class="kt">double</span> <span class="n">vettore</span><span class="o">::</span><span class="n">superficie</span><span class="p">()</span>
<span class="p">{</span>
   <span class="kt">double</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">for</span> <span class="p">(</span><span class="kt">double</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">y</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ed infine un nuovo file sorgente chiamato <span><strong>main.cpp</strong></span></p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include "vettore.h"
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">k</span><span class="p">;</span>
   <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
   <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Superficie: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<p>Se si assume che il file <span><strong>vettore.cpp</strong></span> sia perfetto,
allora abbiamo bisogno di compliarlo una volta sola in un file
<span><strong>.o</strong></span> (un “object file”), tramite il comando (per
esempio):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ -c vettore.cpp
</code></pre></div></div>

<p>(che produce un file <span><strong>vettore.o</strong></span>).</p>

<p>Ogni volta che il file <span><strong>main.cpp</strong></span> viene modifcato, va
compilato in un file eseguibile, per esempio chiamato
<span><strong>test20</strong></span>, per fare questo bisogna dire esplicitamente al
compilatore che deve “linkare” l’oggetto <span><strong>vettore.o</strong></span>
all’interno dell’esegubile <span><strong>test20</strong></span>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ main.cpp vettore.o -o test20 
</code></pre></div></div>

<p>L’eseguibile (su macchine tipo Unix) viene fatto “girare” con:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ./test20
</code></pre></div></div>

<p>Questo procedimento ha un certo numero di vantaggi:</p>

<ul>
  <li>
    <p>Il codice sorgente <code class="language-plaintext highlighter-rouge">vettore.cpp</code> deve essere compilato solo una
volta. Questo fa risparmiare molto tempo nei progetti grandi (fare
il “linking” del file <code class="language-plaintext highlighter-rouge">vettore.o</code> nell’eseguibile <code class="language-plaintext highlighter-rouge">test20</code> e’
molto veloce).</p>
  </li>
  <li>
    <p>E’ possibile passare i file <code class="language-plaintext highlighter-rouge">.h</code> e i <code class="language-plaintext highlighter-rouge">.o</code>. In questo modo possono
usare il tuo programma ma non cambiarlo perche’ non hanno i file
<code class="language-plaintext highlighter-rouge">.cpp</code> (non fidarti molto di questo, aspetta fino a quando avrai una
comprensione piena di questi problemi).</p>
  </li>
</ul>

<p>Si noti che e’ possibile compilare anche il file <code class="language-plaintext highlighter-rouge">main.cpp</code> in un file
di tipo “object” e poi linkarlo con <code class="language-plaintext highlighter-rouge">vettore.o</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> g++ -c main.cpp
 
 g++ main.o vettore.o test20
</code></pre></div></div>

<h2 id="makefile">MAKEFILE</h2>

<p>Qui viene fatta una digressione rispetto all’argomento “differenze tra C
e C++”. Se si vuole apparire come <em>veri</em> programmatori, si dovrebbe
condensare i comandi qui sopra in un <code class="language-plaintext highlighter-rouge">Makefile</code> e compilare usando il
comando <code class="language-plaintext highlighter-rouge">make</code>. Il contenuto del file sotto e’ una versione super
semplificata di un tale Makefile. Prova a copiarlo in un file chiamato
proprio <code class="language-plaintext highlighter-rouge">Makefile</code>. Attenzione nota che, ed e’ molto importante, lo
spazio tra i comandi del <code class="language-plaintext highlighter-rouge">g++</code> deve <span><strong>obbligatoriamente</strong></span>
essere un <code class="language-plaintext highlighter-rouge">Tab</code>. Non usare lo spazio, usa invece il carattere di
tabulazione (tutto a sinistra di una tastiera internazionale sopra il
caps lock).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test20: main.o vettore.o
        g++ main.o vettore.o -o test20
        
main.o: main.cpp vettore.h
        g++ -c main.cpp
        
vettore.o: vettore.cpp vettore.h
          g++ -c vettore.cpp
</code></pre></div></div>

<p>Per utilizzare questo Makefile per compilare, e’ sufficiente usare
questo comando:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make test20
</code></pre></div></div>

<p>Il comando <code class="language-plaintext highlighter-rouge">make</code> fara’ un “parse” (legge i comandi parola per
parola) attraverso il <code class="language-plaintext highlighter-rouge">Makefile</code> e capira’ quello che deve essere fatto.
All’inizio, viene detto che:</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">test20</code> dipende da <code class="language-plaintext highlighter-rouge">main.o</code> e <code class="language-plaintext highlighter-rouge">vettore.o</code></p>
  </li>
  <li>
    <p>a questo punto lancera’ automaticamente <code class="language-plaintext highlighter-rouge">make main.o</code> e
<code class="language-plaintext highlighter-rouge">make vettore.o</code></p>
  </li>
  <li>
    <p>poi controllera’ se <code class="language-plaintext highlighter-rouge">test20</code> esiste gia’ e controllera’
<span><strong>se</strong></span> la data di creazione dei file <code class="language-plaintext highlighter-rouge">main.o</code> e
<code class="language-plaintext highlighter-rouge">vettore.o</code> e’ precedente a <code class="language-plaintext highlighter-rouge">test20</code>. Nel caso in cui il comando
<code class="language-plaintext highlighter-rouge">make</code> determini che la versione corrente di <code class="language-plaintext highlighter-rouge">test20</code> e’ aggiornata
non fara’ nulla e dira’ che non ha fatto nulla.</p>
  </li>
  <li>
    <p>altrimenti se <code class="language-plaintext highlighter-rouge">test20</code> non esiste, oppure <code class="language-plaintext highlighter-rouge">main.o</code> o <code class="language-plaintext highlighter-rouge">vettore.o</code>
sono piu’ recenti di <code class="language-plaintext highlighter-rouge">test20</code> il comando creera’ una versione
aggiornata di <code class="language-plaintext highlighter-rouge">test20</code>, eseguendo: <code class="language-plaintext highlighter-rouge">g++ main.o vettore.o -o test20</code></p>
  </li>
</ul>

<p>La versione di seguito del <code class="language-plaintext highlighter-rouge">Makefile</code> e’ piu’ vicina allo “standard”
Makefile:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>all: test20

test20: main.o vettore.o
        g++ main.o vettore.o -o test20
        
main.o: main.cpp vettore.h
        g++ -c main.cpp
        
vettore.o: vettore.cpp vettore.h
        g++ -c vettore.cpp
          
clean:  
        rm -f *.o test20 *~ #* 
</code></pre></div></div>

<p>Si fa partire la compilazione con il comando <code class="language-plaintext highlighter-rouge">make</code>.</p>

<ul>
  <li>la prima linea nel Makefile implica che se scrivi solo <code class="language-plaintext highlighter-rouge">make</code>, in
realta’ intendi: <code class="language-plaintext highlighter-rouge">make  test20</code></li>
</ul>

<p>Se si usa il comando seguente, tutti i file prodotti durante la
compilazione e tutti i file di testo di backup verranno cancellati:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make clean 
</code></pre></div></div>

<h1 id="ch:this">This: per puntare all’istanza su cui sta agendo un metodo</h1>

<p>Quando un metodo e’ applicato ad un’istanza, quel metodo puo’ usare le
variabili dell’istanza e modificarle… ma alle volte e’ necessario
conoscere l’indirizzo di un’istanza. Nessun problema, il comando
<span><strong>this</strong></span> serve proprio a questo scopo:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
   
   <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
   <span class="p">}</span>
   
   <span class="kt">double</span> <span class="n">modulo</span><span class="p">()</span>
   <span class="p">{</span>
      <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">);</span>
   <span class="p">}</span>
   
   <span class="kt">void</span> <span class="n">definisci_lunghezza</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="kt">double</span> <span class="n">lunghezza</span><span class="p">;</span>
      
      <span class="n">lunghezza</span> <span class="o">=</span> <span class="n">this</span><span class="o">-&gt;</span><span class="n">modulo</span><span class="p">();</span> <span class="c1">// fa il il modulo di QUESTA istanza</span>
      
      <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">lunghezza</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">/</span> <span class="n">lunghezza</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">c</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Il modulo del vettore c: "</span> <span class="o">&lt;&lt;</span> <span class="n">c</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">c</span><span class="p">.</span><span class="n">definisci_lunghezza</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>       <span class="c1">// Transforma c in un vettore di lunghezza 2.</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Il modulo del vettore c:"</span> <span class="o">&lt;&lt;</span> <span class="n">c</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">c</span><span class="p">.</span><span class="n">definisci_lunghezza</span><span class="p">();</span>        <span class="c1">// Transforma b in un vettore unitario.</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Il modulo del vettore c: "</span> <span class="o">&lt;&lt;</span> <span class="n">c</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Il modulo del vettore c: 5.83095
Il modulo del vettore c: 2
Il modulo del vettore c: 1 
</code></pre></div></div>

<h1 id="ch:arrayClassi">Array di istanze di classi</h1>

<p>Ovviamente e’ possibile dichiarare degli oggetti che sono array di
classi:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span> 
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

   <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
   <span class="p">}</span>
   
   <span class="kt">double</span> <span class="n">modulo</span> <span class="p">()</span>
   <span class="p">{</span>
      <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">s</span> <span class="p">[</span><span class="mi">1000</span><span class="p">];</span>
   <span class="n">vettore</span> <span class="n">t</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">vettore</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">vettore</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">vettore</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)};</span>
   
   <span class="n">s</span><span class="p">[</span><span class="mi">23</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>6.40312 
</code></pre></div></div>

<h1 id="ch:esempioClasse">Esempio di dichiarazione di una classe</h1>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
  <span class="nl">public:</span>
     <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
     <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

     <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>  <span class="c1">// questo e' il costruttore</span>
     <span class="n">vettore</span> <span class="n">operator</span> <span class="o">+</span> <span class="p">(</span><span class="n">vettore</span><span class="p">);</span>      <span class="c1">// overload del +  </span>
     <span class="n">vettore</span> <span class="n">operator</span> <span class="o">-</span> <span class="p">(</span><span class="n">vettore</span><span class="p">);</span>      <span class="c1">// overload del -</span>
     <span class="n">vettore</span> <span class="n">operator</span> <span class="o">-</span> <span class="p">();</span>        <span class="c1">// overload del - davanti alla classe stessa   </span>
     <span class="n">vettore</span> <span class="n">operator</span> <span class="o">*</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">);</span><span class="c1">// overload del * prodotto per uno scalare    </span>
     <span class="kt">double</span> <span class="n">modulo</span><span class="p">();</span>              <span class="c1">// metodo per calcolare il modulo della classe</span>
     <span class="kt">void</span> <span class="n">definisci_lunghezza</span> <span class="p">(</span><span class="kt">double</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// modifica il modulo della classe   </span>
<span class="p">};</span>


<span class="n">vettore</span><span class="o">::</span><span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">)</span>    <span class="c1">// specifico cosa fa il costruttore</span>
<span class="p">{</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">vettore</span> <span class="n">vettore</span><span class="o">::</span><span class="n">operator</span> <span class="o">+</span> <span class="p">(</span><span class="n">vettore</span> <span class="n">a</span><span class="p">)</span>   <span class="c1">// specifico l'overload del +</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">vettore</span> <span class="n">vettore</span><span class="o">::</span><span class="n">operator</span> <span class="o">-</span> <span class="p">(</span><span class="n">vettore</span> <span class="n">a</span><span class="p">)</span>   <span class="c1">// specifico l'overload del -</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">vettore</span> <span class="n">vettore</span><span class="o">::</span><span class="n">operator</span> <span class="o">-</span> <span class="p">()</span>   <span class="c1">// se tra parentesi non c'e' nulla, allora </span>
<span class="p">{</span>                                <span class="c1">// l'operatore va messo davanti alla istanza</span>
   <span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">);</span>      <span class="c1">// su cui deve agire</span>
<span class="p">}</span>

<span class="n">vettore</span> <span class="n">vettore</span><span class="o">::</span><span class="n">operator</span> <span class="o">*</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">)</span>   <span class="c1">// overload del * per fare prodotto per scalare</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">*</span> <span class="n">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="n">vettore</span><span class="o">::</span><span class="n">modulo</span><span class="p">()</span>          <span class="c1">// nota che questo metodo ha un tipo e un </span>
<span class="p">{</span>                                 <span class="c1">// HA un valore di return </span>
   <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">);</span>        
<span class="p">}</span>

<span class="kt">void</span> <span class="n">vettore</span><span class="o">::</span><span class="n">definisci_lunghezza</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">)</span> <span class="c1">// questo metodo invece e' void, e   </span>
<span class="p">{</span>                                            <span class="c1">// NON ha un valore di return </span>
   <span class="kt">double</span> <span class="n">lunghezza</span> <span class="o">=</span> <span class="n">this</span><span class="o">-&gt;</span><span class="n">modulo</span><span class="p">();</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">lunghezza</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>  
   <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">/</span> <span class="n">lunghezza</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">ostream</span><span class="o">&amp;</span> <span class="n">operator</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">o</span><span class="p">,</span> <span class="n">vettore</span> <span class="n">a</span><span class="p">)</span> <span class="c1">// questo NON e' un metodo</span>
<span class="p">{</span>                                            <span class="c1">// infatti non era tra i</span>
   <span class="n">o</span> <span class="o">&lt;&lt;</span> <span class="s">"("</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span><span class="p">;</span>    <span class="c1">// prototipi</span>
   <span class="k">return</span> <span class="n">o</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">a</span><span class="p">;</span>         
   <span class="n">vettore</span> <span class="n">b</span><span class="p">;</span>
   <span class="n">vettore</span> <span class="n">c</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
   
   <span class="n">a</span> <span class="o">=</span> <span class="n">c</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span>
   <span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="p">;</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">c</span> <span class="o">+</span> <span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="mi">7</span><span class="p">;</span>

   <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="n">c</span><span class="p">;</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Il modulo del vettore c: "</span> <span class="o">&lt;&lt;</span> <span class="n">c</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Il contenuto del vettore a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"L'opposto del vettore a: "</span> <span class="o">&lt;&lt;</span> <span class="o">-</span><span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">c</span><span class="p">.</span><span class="n">definisci_lunghezza</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>   <span class="c1">// Transforma c in un vettore di modulo 2</span>
   
   <span class="n">a</span> <span class="o">=</span> <span class="n">vettore</span> <span class="p">(</span><span class="mi">56</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">);</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">vettore</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
   <span class="n">b</span><span class="p">.</span><span class="n">definisci_lunghezza</span><span class="p">();</span>    <span class="c1">// Transforma b in un vettore unitario</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Il contenuto del vettore b: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="kt">double</span> <span class="n">k</span><span class="p">;</span>
   
   <span class="n">k</span> <span class="o">=</span> <span class="n">vettore</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">).</span><span class="n">modulo</span><span class="p">();</span> <span class="c1">// k conterra' 1.4142 (=radice di 2)</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"k contiene: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Il modulo del vettore c: 40.8167
Il contenuto del vettore a: (3, 5)
L' opposto del vettore a: (-3, -5)
Il contenuto del vettore b: (0.971275, 0.23796)
k contiene: 1.41421 
</code></pre></div></div>

<p>E’ altresi’ possibile definire una funzione che produca la somma di due
oggetti vettore senza che questo venga menzionato all’interno della
definizione della classe. In questo caso non sara’ un metodo della
classe, ma piuttosto una funzione che usa vettori:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vettore</span> <span class="n">operator</span> <span class="o">+</span> <span class="p">(</span><span class="n">vettore</span> <span class="n">a</span><span class="p">,</span> <span class="n">vettore</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span> 
</code></pre></div></div>

<p>Nell’esempio delle definizione della classe vettore qui sopra e’
definita la moltiplicazione di un vettore per un double. Supponiamo di
volere la moltiplicazione di un double per un vettore. In questo caso
dobbiamo scrivere una funzione isolata fuori dalla classe:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">vettore</span> <span class="n">operator</span> <span class="o">*</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="n">vettore</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span> 
</code></pre></div></div>

<p>Chiaramente le keyword <span><strong>new</strong></span> e <span><strong>delete</strong></span>
funzionano anche per le istanze delle classi. In piu’,
<span><strong>new</strong></span> automaticamente chiama il constructor per
inizializzare gli oggetti, e <span><strong>delete</strong></span> automaticamente
chiama il destructor prima di dealloccare la memoria delle variabili
dell’istanza come:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

   <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
   <span class="n">vettore</span> <span class="n">operator</span> <span class="o">+</span> <span class="p">(</span><span class="n">vettore</span><span class="p">);</span>
   <span class="n">vettore</span> <span class="n">operator</span> <span class="o">-</span> <span class="p">(</span><span class="n">vettore</span><span class="p">);</span>
   <span class="n">vettore</span> <span class="n">operator</span> <span class="o">-</span> <span class="p">();</span>
   <span class="n">vettore</span> <span class="n">operator</span> <span class="o">*</span> <span class="p">(</span><span class="kt">double</span><span class="p">);</span>
   
   <span class="kt">double</span> <span class="n">modulo</span><span class="p">();</span>
   <span class="kt">void</span> <span class="n">definisci_lunghezza</span> <span class="p">(</span><span class="kt">double</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">vettore</span><span class="o">::</span><span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
   <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">vettore</span> <span class="n">vettore</span><span class="o">::</span><span class="n">operator</span> <span class="o">+</span> <span class="p">(</span><span class="n">vettore</span> <span class="n">a</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">vettore</span> <span class="n">vettore</span><span class="o">::</span><span class="n">operator</span> <span class="o">-</span> <span class="p">(</span><span class="n">vettore</span> <span class="n">a</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">vettore</span> <span class="n">vettore</span><span class="o">::</span><span class="n">operator</span> <span class="o">-</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">vettore</span> <span class="n">vettore</span><span class="o">::</span><span class="n">operator</span> <span class="o">*</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">vettore</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">a</span> <span class="o">*</span> <span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="n">vettore</span><span class="o">::</span><span class="n">modulo</span><span class="p">()</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">vettore</span><span class="o">::</span><span class="n">definisci_lunghezza</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="o">&amp;</span><span class="n">il_vettore</span> <span class="o">=</span> <span class="o">*</span><span class="n">this</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">lunghezza</span> <span class="o">=</span> <span class="n">il_vettore</span><span class="p">.</span><span class="n">modulo</span><span class="p">();</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">lunghezza</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>
   <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">/</span> <span class="n">lunghezza</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">ostream</span><span class="o">&amp;</span> <span class="n">operator</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">o</span><span class="p">,</span> <span class="n">vettore</span> <span class="n">a</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">o</span> <span class="o">&lt;&lt;</span> <span class="s">"("</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span><span class="p">;</span>
   <span class="k">return</span> <span class="n">o</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">c</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
   <span class="n">vettore</span> <span class="o">*</span><span class="n">r</span><span class="p">;</span>     <span class="c1">// r e' un puntatore a vettore.</span>
   <span class="n">r</span> <span class="o">=</span> <span class="n">new</span> <span class="n">vettore</span><span class="p">;</span><span class="c1">//  new alloccca la memoria necessaria</span>
                   <span class="c1">// per contenere le variabili di vettore,</span>
                   <span class="c1">// chiama il costruttore che le </span>
                   <span class="c1">// inizializza a 0, 0. Infine </span>
                   <span class="c1">// new restituisce l'indirizzo dell'istanza di vettore </span>
                   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>                
                   
   <span class="n">r</span><span class="o">-&gt;</span><span class="n">x</span> <span class="o">=</span> <span class="mi">94</span><span class="p">;</span>
   <span class="n">r</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">=</span> <span class="mi">345</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="o">*</span><span class="n">r</span> <span class="o">=</span> <span class="n">vettore</span> <span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="mi">343</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="o">*</span><span class="n">r</span> <span class="o">=</span> <span class="o">*</span><span class="n">r</span> <span class="o">-</span> <span class="n">c</span><span class="p">;</span>
   <span class="n">r</span><span class="o">-&gt;</span><span class="n">definisci_lunghezza</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="o">*</span><span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">c</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="o">-*</span><span class="n">r</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">delete</span> <span class="n">r</span><span class="p">;</span>  <span class="c1">// Chiama il distruttore di vettore </span>
              <span class="c1">// poi libera la memoria.</span>
              
   <span class="n">r</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">;</span>    <span class="c1">// r punta verso il vettore c</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">r</span> <span class="o">=</span> <span class="n">new</span> <span class="n">vettore</span> <span class="p">(</span><span class="mi">78</span><span class="p">,</span> <span class="mi">345</span><span class="p">);</span>  <span class="c1">// Crea un nuovo vettore.</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>         <span class="c1">// Il costruttore  inizializzera'</span>
                               <span class="c1">// la x e la y di vettore a 78 and 345</span>
                               
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"componente x di r: "</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"componente y di r: "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="o">*</span><span class="n">r</span><span class="p">).</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">delete</span> <span class="n">r</span><span class="p">;</span>
   <span class="n">r</span> <span class="o">=</span> <span class="n">new</span> <span class="n">vettore</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>  <span class="c1">// crea un array di 4 vettore</span>
   <span class="n">r</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">vettore</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">delete</span> <span class="p">[]</span> <span class="n">r</span><span class="p">;</span>         <span class="c1">// cancella l'array</span>
   
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
   <span class="n">r</span> <span class="o">=</span> <span class="n">new</span> <span class="n">vettore</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>  <span class="c1">// bello!</span>
   <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">vettore</span> <span class="p">(</span><span class="mi">432</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">delete</span> <span class="p">[]</span> <span class="n">r</span><span class="p">;</span>
   
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(0, 0)
(94, 345)
(94, 343)
(0.77992, 2.89685)
(-60.5984, -132.937)
(3, 5)
(78, 345)
componente y di r: 78
componente x di r: 78
6.40312
(432, 3) 
</code></pre></div></div>

<h1 id="ch:static">Variabili “static” in una classe</h1>

<p>Una o piu’ variabili in una classe possono essere dichiarate
<span><strong>static</strong></span>. In questo caso:</p>

<ul>
  <li>
    <p>esiste <span><strong>una sola istanza</strong></span> di una variabile static</p>
  </li>
  <li>
    <p>questa variabile e’ <span><strong>condivisa</strong></span> da tutte le istanze
della classe</p>
  </li>
  <li>
    <p>questa variabile deve essere <span><strong>inizializzata fuori</strong></span>
dalla dichiarazione della classe (e puo’ essere modificata)</p>
  </li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
      <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
      <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
      <span class="k">static</span> <span class="kt">int</span> <span class="n">count</span><span class="p">;</span>   <span class="c1">// &lt;= count e' una variabile STATIC</span>
      
      <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1">// COSTRUTTORE</span>
      <span class="p">{</span>
         <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
         <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
         <span class="n">count</span><span class="o">++</span><span class="p">;</span>  <span class="c1">// ogni volta che viene chiamato, si aggiunge 1 a count</span>
      <span class="p">}</span>
      
      <span class="o">~</span><span class="n">vettore</span><span class="p">()</span>    <span class="c1">// DISTRUTTORE</span>
      <span class="p">{</span>
         <span class="n">count</span><span class="o">--</span><span class="p">;</span>  <span class="c1">// ogni volta che viene chiamato si toglie 1 a count</span>
      <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">vettore</span><span class="o">::</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Inizializzazione FUORI </span>
                        <span class="c1">// dalla definizione della classe</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Quanti vettore ci sono:"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">vettore</span> <span class="n">a</span><span class="p">;</span>    <span class="c1">// istanza di vettore, il costruttore aggiunge 1 a count!      </span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">vettore</span><span class="o">::</span><span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> 
   
   <span class="n">vettore</span> <span class="n">b</span><span class="p">;</span>   <span class="c1">// altra istanza, count diventa 2!</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">vettore</span><span class="o">::</span><span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">vettore</span> <span class="o">*</span><span class="n">r</span><span class="p">,</span> <span class="o">*</span><span class="n">u</span><span class="p">;</span>  <span class="c1">// due puntatori, il costruttore NON e' ancora chiamato</span>
   <span class="n">r</span> <span class="o">=</span> <span class="n">new</span> <span class="n">vettore</span><span class="p">;</span> <span class="c1">// new chiama il costruttore, count diventa 3</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">vettore</span><span class="o">::</span><span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">u</span> <span class="o">=</span> <span class="n">new</span> <span class="n">vettore</span><span class="p">;</span> <span class="c1">// new chiama il costruttore, count diventa 4</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">delete</span> <span class="n">r</span><span class="p">;</span>       <span class="c1">// delete chiama il DISTRUTTORE, count diventa 3</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">vettore</span><span class="o">::</span><span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">delete</span> <span class="n">u</span><span class="p">;</span>       <span class="c1">// altro delete, count diventa 2</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Quanti vettore ci sono:
1
2
3
4
3
2
</code></pre></div></div>

<h1 id="ch:const">Variabili “const” in una classe</h1>

<p>Un tipo diverso di variabile e’ la const. Una variabile
<span><strong>const</strong></span>:</p>

<ul>
  <li>
    <p>viene <span><strong>definita all’interno</strong></span> della classe</p>
  </li>
  <li>
    <p><span><strong>non</strong></span> puo’ piu’ essere modificata</p>
  </li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
      <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
      <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
      <span class="k">const</span> <span class="k">static</span> <span class="kt">double</span> <span class="n">pi</span> <span class="o">=</span> <span class="mi">3</span><span class="p">.</span><span class="mi">1415927</span><span class="p">;</span> <span class="c1">// &lt;= pi greco non puo' essere modificato</span>
      
      <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
         <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">double</span> <span class="n">cylinder_volume</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
      <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Il valore di pi greco: "</span> <span class="o">&lt;&lt;</span> <span class="n">vettore</span><span class="o">::</span><span class="n">pi</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">vettore</span> <span class="n">k</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>  
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Risultato: "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">cylinder_volume</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Il valore di pi greco: 3.14159

Risultato: 28.2743
</code></pre></div></div>

<h1 id="ch:derivazione">E’ possibile DERIVARE un’altra classe da un’altra</h1>

<p>Una classe puo’ essere derivata da un’altra classe. La nuova classe,
<span><strong>eredita</strong></span> (inherits) le variabili e i metodi dalla
<span><strong>base class</strong></span>. Si possono aggiungere nuovi metodi e
variabili alla classe appena creata:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
      <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
      <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

      <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
         <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
      <span class="p">}</span>
      
     <span class="kt">double</span> <span class="n">modulo</span><span class="p">()</span>
     <span class="p">{</span>
        <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">);</span>
     <span class="p">}</span>
     
     <span class="kt">double</span> <span class="n">superficie</span><span class="p">()</span>
     <span class="p">{</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">trivettore</span><span class="o">:</span> <span class="n">public</span> <span class="n">vettore</span>  <span class="c1">// trivettore e' derivato da vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">z</span><span class="p">;</span>  <span class="c1">// variabile in piu' rispetto a x e y di vettore</span>
   
   <span class="n">trivettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">m</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">p</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="n">vettore</span> <span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">z</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// il constructor di vettore verra'  </span>
             <span class="c1">// chiamato PRIMA del costruttore di trivettore</span>
             <span class="c1">// con parametri m e n</span>
   <span class="p">}</span>
   
   <span class="n">trivettore</span> <span class="p">(</span><span class="n">vettore</span> <span class="n">a</span><span class="p">)</span><span class="c1">// questo constructor indica cosa fare nel caso in cui</span>
   <span class="p">{</span>                     <span class="c1">// venga fatto un cast da un vettore a un trivettore </span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
      <span class="n">z</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="kt">double</span> <span class="n">modulo</span> <span class="p">()</span>  <span class="c1">// ri-definisce il modulo() per un trivettore</span>
   <span class="p">{</span>
      <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span><span class="o">*</span><span class="n">z</span><span class="p">);</span>
   <span class="p">}</span>

   <span class="kt">double</span> <span class="n">volume</span> <span class="p">()</span>
   <span class="p">{</span> 
       <span class="k">return</span> <span class="n">this</span><span class="o">-&gt;</span><span class="n">superficie</span><span class="p">()</span> <span class="o">*</span> <span class="n">z</span><span class="p">;</span> <span class="c1">// usa il metodo "superficie" di questa istanza  </span>
   <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">a</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
   <span class="n">trivettore</span> <span class="n">b</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"a (4, 5)    b (1, 2, 3)  *r = b"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Superficie di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> 
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Volume di b: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">volume</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Superficie della base di b: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Modulo di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Modulo di b: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> 
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Modulo di base di b: "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">vettore</span><span class="o">::</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">trivettore</span> <span class="n">k</span><span class="p">;</span>
   <span class="n">k</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>     <span class="c1">// grazie alla definizione di trivettore(vettore)</span>
              <span class="c1">// copia di x e y,      k.z = 0</span>
   <span class="n">vettore</span> <span class="n">j</span><span class="p">;</span>
   <span class="n">j</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>     <span class="c1">// copia di x e y.      b.z non fa nulla</span>
   
   <span class="n">vettore</span> <span class="o">*</span><span class="n">r</span><span class="p">;</span> <span class="c1">// puntatore di un vettore</span>
   <span class="n">r</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">;</span>    <span class="c1">// che pero' punta ad un TRIVECTOR</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Superficie di r: "</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Modulo di r: "</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a (4, 5)  b (1, 2, 3)  *r = b

Superficie di a: 20
Volume di b: 6
Superficie della base di b: 2
Modulo di a: 6.40312
Modulo di b: 3.74166
Modulo della base di b: 2.23607
Superficie di r: 2
Modulo di r: 2.23607 
</code></pre></div></div>

<h1 id="metodi-virtuali">Metodi virtuali</h1>

<p>Se un metodo viene dichiarato virtuale, il programma controllera’ sempre
il tipo dell’istanza a cui punta e usera’ il metodo appropriato.</p>

<p>Nel programma qui sopra, <span><strong>r-&gt;modulo()</strong></span> calcola il modulo
del vettore, usando <span><strong>x</strong></span> e <span><strong>y</strong></span>, perche’
<span><strong>r</strong></span> e’ stato dichiarato come un puntatore ad un vettore.
Il fatto che <span><strong>r</strong></span> in pratica punti ad un trivettore non
viene preso in considerazione. Se vuoi che il programma controlli il
tipo dell’oggetto puntato e scelga il metodo appropriato, allora bisogna
dichiarare il metodo come <span><strong>virtuale</strong></span> all’interno della
classe di base.</p>

<p>Se perlomeno uno dei metodi della classe di base e’ virtuale, allora un
“header” di 4 byte viene aggiunto ad ogni istanza della classe.
Questo consente al programma di determinare a cosa punti un vettore (4
byte e’ probabilmente specifico del compilatore usato, su una macchina a
64 bit forse sono 8 byte).</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

   <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">virtual</span> <span class="kt">double</span> <span class="n">modulo</span><span class="p">()</span> <span class="c1">//   metodo dichiarato come VIRTUALE</span>
   <span class="p">{</span>
      <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">trivettore</span><span class="o">:</span> <span class="n">public</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
      <span class="kt">double</span> <span class="n">z</span><span class="p">;</span>
      <span class="n">trivettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>  <span class="c1">// Solo per fare un esempio pertinente</span>
         <span class="n">y</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>  <span class="c1">// qui NON viene chiamato il costruttore   </span>
         <span class="n">z</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>  <span class="c1">// di vettore e si lascia che il costruttore</span>
                 <span class="c1">// di trivettore faccia tutto il lavoro. </span>
                 <span class="c1">// Il risultato non cambia</span>
      <span class="p">}</span>            
      <span class="kt">double</span> <span class="n">modulo</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span><span class="o">*</span><span class="n">z</span><span class="p">);</span>
      <span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">test</span> <span class="p">(</span><span class="n">vettore</span> <span class="o">&amp;</span><span class="n">k</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Risultato della funzione test:  "</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">a</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
   <span class="n">trivettore</span> <span class="n">b</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"a (4, 5)  b (1, 2, 3)"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">vettore</span> <span class="o">*</span><span class="n">r</span><span class="p">;</span>
   <span class="n">r</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"modulo di vettore a: "</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">r</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"modulo di trivettore b: "</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">test</span> <span class="p">(</span><span class="n">a</span><span class="p">);</span>
   <span class="n">test</span> <span class="p">(</span><span class="n">b</span><span class="p">);</span>
   
   <span class="n">vettore</span> <span class="o">&amp;</span><span class="n">s</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"modulo di trivettore b: "</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a (4, 5) b (1, 2, 3)

modulo di vettore a: 6.40312
modulo di trivettore b: 3.74166
Risultato della funzione test:
 6.40312
Risultato della funzione test:
 3.74166
modulo di trivettore b: 3.74166 
</code></pre></div></div>

<h1 id="derivare-una-classe-da-piu-di-una-classe-di-base">Derivare una classe da piu’ di una classe di base</h1>

<p>Se vi state domandando se si possa derivare una classe da piu’ di una
classe di base, la risposta e’ si’:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">public:</span>
      <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
      <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

      <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
         <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">double</span> <span class="n">superficie</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">fabs</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">);</span>
      <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">numero</span>
<span class="p">{</span>
   <span class="nl">public:</span>
      <span class="kt">double</span> <span class="n">z</span><span class="p">;</span>
      <span class="n">numero</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">z</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">int</span> <span class="n">is_negative</span> <span class="p">()</span> 
      <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">z</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
         <span class="k">else</span>
         <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">trivettore</span><span class="o">:</span> <span class="n">public</span> <span class="n">vettore</span><span class="p">,</span> <span class="n">public</span> <span class="n">numero</span>
<span class="p">{</span>
   <span class="nl">public:</span>
      <span class="n">trivettore</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="n">vettore</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span> <span class="n">numero</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
      <span class="p">{</span>
      <span class="p">}</span>  <span class="c1">// Il costruttore di trivettore chiama il</span>
         <span class="c1">// costruttore di vettore, poi il costruttore</span>
         <span class="c1">// di numero e in questo esempio non fa nulla</span>
         <span class="c1">// di piu'                                 </span>
      <span class="kt">double</span> <span class="n">volume</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">fabs</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">*</span> <span class="n">z</span><span class="p">);</span> 
      <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">trivettore</span> <span class="n">a</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">volume</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">is_negative</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
 
<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>24
6
1 
</code></pre></div></div>

<h1 id="ch:funzioniGeneriche">Derivazione delle classi e metodi generici</h1>

<p>La derivazione da classi gia’ esistenti consente di costruire classi
piu’ complesse costruite a partire da una classe di base. Esiste
un’altra applicazione della derivazione delle classi: consentire al
programmatore di scrivere delle <span><strong>generic functions</strong></span>.</p>

<p>Supponiamo di definire una classe di base senza alcuna variabile. In
pratica, non ha senso usare istanze di quella classe all’interno del
proprio programma. Supponiamo pero’ di avere costruito una funzione, il
cui scopo sia quello di ordinare istanze proprio di quella classe.
Questa funzione sara’ in grado di ordinare qualunque tutti gli oggetti,
che siano istanze di classi derivate dalla classe di base iniziale. La
sola condizione e’ che all’interno dei ognuna delle definizioni di
classe derivata, tutti i metodi di cui ha bisogno la funzione di
ordinamento siano definiti correttamente:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span><span class="n">class</span> <span class="n">octopus</span>                     <span class="c1">// costruiamo una classe senza argomenti</span>
<span class="p">{</span>
   <span class="nl">public:</span>

      <span class="k">virtual</span> <span class="kt">double</span> <span class="n">modulo</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">// =0 implica che la funzione non e' definita</span>
                                  <span class="c1">// Questo fa si' che istanze di questa</span>
                                  <span class="c1">// classe non possano essere dichiarate </span>
<span class="p">};</span>

<span class="kt">double</span> <span class="nf">modulo_maggiore</span> <span class="p">(</span><span class="n">octopus</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="n">octopus</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="n">octopus</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">double</span> <span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">modulo</span><span class="p">();</span>    <span class="c1">// questa funzione restituisce come valore il modulo</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">r</span><span class="p">)</span> <span class="n">r</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">modulo</span><span class="p">();</span>  <span class="c1">// della istanza com modulo</span>
                                        <span class="c1">// maggiore tra le 3</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">modulo</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">r</span><span class="p">)</span> <span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">modulo</span><span class="p">();</span>
   <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">class</span> <span class="n">vettore</span><span class="o">:</span> <span class="n">public</span> <span class="n">octopus</span>   <span class="c1">// costruisco una nuova classe</span>
                                <span class="c1">// che eredita da octopus</span>
<span class="p">{</span>
   <span class="nl">public:</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span> 
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

   <span class="n">vettore</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
   <span class="p">}</span>
   
   <span class="kt">double</span> <span class="n">modulo</span><span class="p">()</span>           <span class="c1">// ha un metodo modulo come la classe di base</span>
   <span class="p">{</span>
      <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">numero</span><span class="o">:</span> <span class="n">public</span> <span class="n">octopus</span>  <span class="c1">// costruisco un'altra classe derivata da octopus</span>
<span class="p">{</span>
   <span class="nl">public:</span>
      <span class="kt">double</span> <span class="n">n</span><span class="p">;</span>
      <span class="n">numero</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">n</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kt">double</span> <span class="n">modulo</span><span class="p">()</span>        <span class="c1">// anche questa ha un metodo chiamato modulo</span>
      <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
         <span class="k">else</span>       <span class="k">return</span> <span class="o">-</span><span class="n">n</span><span class="p">;</span>
      <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">k</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">m</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span> <span class="n">n</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
   <span class="n">numero</span> <span class="n">p</span> <span class="p">(</span><span class="mi">5</span><span class="p">),</span>  <span class="n">q</span> <span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">),</span> <span class="n">r</span> <span class="p">(</span><span class="o">-</span><span class="mi">150</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">modulo_maggiore</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// accetta tutte le classi</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">modulo_maggiore</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// che sono derivate da octopus</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">modulo_maggiore</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// quindi anche vettore e numero</span>
   
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>100
150
100
</code></pre></div></div>

<p>Una persona potrebbe pensare: ”ok, l’idea di derivare classi dalla
classe <span><strong>octopus</strong></span> e’ buona perche’, in quel modo posso
applicare loro istanze dei metodi della mia classe e funzioni che erano
state progettate in modo generico per la classe
<span><strong>octopus</strong></span>. Cosa potrebbe succedere se ci fosse un’altra
classe di base, chiamata <span><strong>cuttlefish</strong></span>, che ha dei metodi
e delle funzioni molto interessanti? E’ forse necessario scegliere tra
<span><strong>octopus</strong></span> e <span><strong>cuttlefish</strong></span> quando si vuole
derivare una classe?” No chiaramente no!. Una classe derivata puo’
essere derivata sia da <span><strong>octopus</strong></span> che da
<span><strong>cuttlefish</strong></span>.</p>

<p>Questo e’ <span><strong>POLIMORFISMO</strong></span>
La classe derivata, semplicemente, deve definire sia metodi necessari
per <span><strong>octopus</strong></span> che per <span><strong>cuttlefish</strong></span>:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">class</span> <span class="n">octopus</span>
<span class="p">{</span>
   <span class="k">virtual</span> <span class="kt">double</span> <span class="n">modulo</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">cuttlefish</span>
<span class="p">{</span>
   <span class="k">virtual</span> <span class="kt">int</span> <span class="n">test</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">vettore</span><span class="o">:</span> <span class="n">public</span> <span class="n">octopus</span><span class="p">,</span> <span class="n">public</span> <span class="n">cuttlefish</span>
<span class="p">{</span>
   <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">modulo</span> <span class="p">()</span>
   <span class="p">{</span>
      <span class="k">return</span> <span class="n">sqrt</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">);</span> 
   <span class="p">}</span>
   
   <span class="kt">int</span> <span class="n">test</span> <span class="p">()</span>
   <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">else</span>       <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="ch:encapsulation">Encapsulation: public, protected e private</h1>

<ul>
  <li>
    <p>La direttiva <span><strong>public</strong></span>, significa che, ovunque nel
programma, si puo’ accedere ed usare le variabili e i metodi scritti
di seguito alla direttiva stessa.</p>
  </li>
  <li>
    <p>La direttiva <span><strong>protected</strong></span>, significa che le variabili
e i metodi scritti sotto ad essa sono accedibili ed usabili solo
tramite metodi della classe stessa <span><strong>E</strong></span> metodi di
classi derivate da essa.</p>
  </li>
  <li>
    <p>La direttiva <span><strong>private</strong></span> e’ ancora piu’ restrittiva, e’
possibile accedere alle variabili ed ai metodi della classe stessa
(non da quelle derivate o dall’esterno).</p>
  </li>
</ul>

<p>Il fatto che le variabili o i metodi siano dichiarati
<span><strong>private</strong></span> or <span><strong>protected</strong></span> significa che
nulla esterno alla classe puo’ accedere a loro o usarli. Questo tipo di
caratteristica si chiama <span><strong>ENCAPSULATION</strong></span> (se si vuole
dare ad una funzione il diritto di accesso a quei metodi o a quelle
variabili, allora e’ necessario includere il <span><strong>prototype</strong></span>
della funzione all’interno della definizione di classe, con davanti la
keyword: <span><strong>friend</strong></span>.</p>

<p>E’ considerata una buona pratica di programmazione il fatto di fare
“encapsulation” per tutte le variabili di una classe. Questo
comportamento puo’ sembrare strano se si e’ abituati agli
<span><strong>struct</strong></span>, in C. In effetti uno <span><strong>struct</strong></span> ha
senso solo se e’ possibile accedere a tutti i dati al suo interno. In
C++, invece, si deve creare un metodo apposito per accedere ai dati
all’interno di una classe. L’esempio seguente usa l’esempio di base del
capitolo [ch:metodiClassi], ma dichiara i dati della classe come
<span><strong>protected</strong></span>:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">protected:</span>
     <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
     <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

   <span class="nl">public:</span>
      <span class="kt">void</span> <span class="n">definisci_x</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">x</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">void</span> <span class="n">definisci_y</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">y</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">double</span> <span class="n">superficie</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="kt">double</span> <span class="n">s</span><span class="p">;</span>
         <span class="n">s</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="n">s</span><span class="p">;</span>
         <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
      <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">a</span><span class="p">;</span>
   <span class="n">a</span><span class="p">.</span><span class="n">definisci_x</span> <span class="p">(</span><span class="mi">3</span><span class="p">);</span>
   <span class="n">a</span><span class="p">.</span><span class="n">definisci_y</span> <span class="p">(</span><span class="mi">4</span><span class="p">);</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"La superficie di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>La superficie di a: 12 
</code></pre></div></div>

<p>L’esempio di cui sopra, e’ un po’ strano dato che i parametri x e y
della classe possono essere inizializzati, ma non letti! Qualunque
tentativo, all’interno del main() di leggere <span><strong>a.x</strong></span> o
<span><strong>a.y</strong></span> portera’ ad un errore di compilazione. Nell’esempio
seguente, invece si potra’ anche leggere sia x che y:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">protected:</span>
      <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
      <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
      
   <span class="nl">public:</span>
      <span class="kt">void</span> <span class="n">definisci_x</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">x</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">void</span> <span class="n">definisci_y</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">y</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">double</span> <span class="n">ottieni_x</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">double</span> <span class="n">ottieni_y</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">y</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">double</span> <span class="n">superficie</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="kt">double</span> <span class="n">s</span><span class="p">;</span>
         <span class="n">s</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="n">s</span><span class="p">;</span>
         <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
      <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">a</span><span class="p">;</span>
   <span class="n">a</span><span class="p">.</span><span class="n">definisci_x</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
   <span class="n">a</span><span class="p">.</span><span class="n">definisci_y</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"La superficie di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"La larghezza di a:  "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">ottieni_x</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"L'altezza di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">ottieni_y</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> 
<span class="p">}</span>   
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>La superficie di a: 12
La larghezza di a: 3
L'altezza di a: 4 
</code></pre></div></div>

<p>In C++ una persona non dovrebbe poter accedere ai dati di una classe
direttamente. Si dovrebbero dichiarare dei metodi appositi. Perche’
viene richiesto questo comportamento? Ci sono molte ragioni. Una di
queste e’ che in questo modo si consente di cambiare il modo in cui i
dati sono rappresentati all’interno della classe. Un’altra ragione e’
che quasto consente ai dati all’interno della classe di essere
“cross-dependent”. Supponiamo che x e y debbano sempre avere lo
stesso segno, altrimenti questo causi dei problemi… Se fosse
consentito accedere ai dati della classe direttamente, sarebbe possibile
e semplice imporre per esempio che x sia positivo e negativo.
Nell’esempio qui sotto questo e’ controllato strettamente.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
</span><span class="kt">int</span> <span class="nf">sign</span> <span class="p">(</span><span class="kt">double</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">class</span> <span class="n">vettore</span>
<span class="p">{</span>
   <span class="nl">protected:</span>
      <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
      <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>

   <span class="nl">public:</span>
      <span class="kt">void</span> <span class="n">definisci_x</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">x</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">sign</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="n">sign</span><span class="p">(</span><span class="n">y</span><span class="p">))</span> <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="n">y</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">void</span> <span class="n">definisci_y</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">y</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">sign</span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">!=</span> <span class="n">sign</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">double</span> <span class="n">ottieni_x</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">double</span> <span class="n">ottieni_y</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">y</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="kt">double</span> <span class="n">superficie</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="kt">double</span> <span class="n">s</span><span class="p">;</span>
         <span class="n">s</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="n">s</span><span class="p">;</span>
         <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
      <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">vettore</span> <span class="n">a</span><span class="p">;</span>
   <span class="n">a</span><span class="p">.</span><span class="n">definisci_x</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
   <span class="n">a</span><span class="p">.</span><span class="n">definisci_y</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"La superficie di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">superficie</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"La larghezza di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">ottieni_x</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"L'altezza di a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">ottieni_y</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>La superficie di a: 12
La larghezza di a: 3
L'altezza di a: 4
</code></pre></div></div>

<h1 id="ch:inout">Brevi cenni all’ Input e output di file</h1>

<p>Parliamo ora di input/output. Questo e’ un argomento molto vasto per
quanto riguarda il C++. Nel seguito c’e’ un programma che scrive un
file:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;fstream&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">fstream</span> <span class="n">f</span><span class="p">;</span>
   <span class="n">f</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">"test.txt"</span><span class="p">,</span> <span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="p">);</span>
   <span class="n">f</span> <span class="o">&lt;&lt;</span> <span class="s">"Questo testo e' inviato in output ad un file."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">345</span><span class="p">;</span>
   <span class="n">f</span> <span class="o">&lt;&lt;</span> <span class="s">"Il numero a: "</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">f</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
    
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Il contenuto del file test.txt:
Questo testo e' inviato in output ad un file.
Il numero a: 345
</code></pre></div></div>

<p>Qui invece c’e’ il programma che legge da file:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;fstream&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="n">fstream</span> <span class="n">f</span><span class="p">;</span>
   <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Cosa c'e' nel file test.txt"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   
   <span class="n">f</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">"test.txt"</span><span class="p">,</span> <span class="n">ios</span><span class="o">::</span><span class="n">in</span><span class="p">);</span>
   <span class="k">while</span> <span class="p">(</span><span class="o">!</span> <span class="n">f</span><span class="p">.</span><span class="n">eof</span><span class="p">()</span> <span class="p">)</span>
   <span class="p">{</span>
      <span class="n">f</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">c</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="n">f</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> 
<span class="p">}</span>   
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Questo testo e' inviato in output ad un file.
Il numero a: 345
</code></pre></div></div>

<h1 id="ch:arrayCh">Array di character possono essere usati come file</h1>

<p>In generale e’ possibile fare le stesse operazioni sugli array di
character che sui file. Questo risulta molto utile per convertire dati o
per gestire array di memoria.</p>

<p>Qui c’e’ un programma che scrive su un array di character:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;strstream&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="kt">char</span> <span class="n">a</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
   <span class="n">ostrstream</span> <span class="n">b</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">1024</span><span class="p">);</span>
   <span class="n">b</span><span class="p">.</span><span class="n">seekp</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>                       <span class="c1">// Inizia dal primo char.</span>
   <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="s">"2 + 2 = "</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&lt;&lt;</span> <span class="n">ends</span><span class="p">;</span> <span class="c1">// OCCHIO usa il comando "ends", non "endl" </span>
                                     <span class="c1">// "ends" e' semplicemente il</span>
                                     <span class="c1">// carattere null o '\0'</span>

   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="n">strcpy</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">"A sinus: "</span><span class="p">);</span>
   <span class="n">b</span><span class="p">.</span><span class="n">seekp</span><span class="p">(</span><span class="n">strlen</span> <span class="p">(</span><span class="n">a</span><span class="p">));</span>
   <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="s">"sin ("</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="s">") = "</span> <span class="o">&lt;&lt;</span> <span class="n">sin</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">ends</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2 + 2 = 4
A sinus: sin (2) = 0.909297 
</code></pre></div></div>

<p>Un programma che legge da una stringa di caratteri:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;strstream&gt;
#include &lt;cstring&gt;
</span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="kt">char</span> <span class="n">a</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
   <span class="n">istrstream</span> <span class="n">b</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">1024</span><span class="p">);</span>
   <span class="n">strcpy</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">"45.656"</span><span class="p">);</span>
   <span class="kt">double</span> <span class="n">k</span><span class="p">,</span> <span class="n">p</span><span class="p">;</span>
   <span class="n">b</span><span class="p">.</span><span class="n">seekg</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">// Inizia dal primo carattere.</span>
   <span class="n">b</span> <span class="o">&gt;&gt;</span> <span class="n">k</span><span class="p">;</span>
   <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">strcpy</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">"444.23 56.89"</span><span class="p">);</span>
   <span class="n">b</span><span class="p">.</span><span class="n">seekg</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
   <span class="n">b</span> <span class="o">&gt;&gt;</span> <span class="n">k</span> <span class="o">&gt;&gt;</span> <span class="n">p</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>46.656
444.23  57.89
</code></pre></div></div>

<h1 id="ch:formattare">Un esempio di output formattato</h1>

<p>Questo programma produce un output formattato in due modi. Si noti che i
MODIFICATORI <span><strong>width()</strong></span> e <span><strong>setw()</strong></span> hanno
effetto SOLO sul prossimio output dello stream. Elementi successivi non
verranno influenzati dai MODIFICATORI.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#include &lt;iostream&gt;
#include&lt;iomanip&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Una lista di numeri:"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">1024</span><span class="p">;</span> <span class="n">i</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">cout</span><span class="p">.</span><span class="n">width</span> <span class="p">(</span><span class="mi">7</span><span class="p">);</span>
      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> 
   <span class="p">}</span>
   
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Una tabella di numeri:"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Una lista di numeri:
1
2
4
8
16
32
64
128
256
512
1024
Una tabella di numeri:
0 0
1 1
2 8
3 27
4 64 
</code></pre></div></div>

<p>A questo punto avete una conoscenza di base del C++. Da un buon libro
potrete imparare molte altre cose. Il <em>file management system</em> e’ molto
potente, e ha a disposizione molte altre possibilita’ rispetto a quelle
illustrate in questa guida. C’e’ molto altro da dire riguardo alle
classi, <span><strong>classi template</strong></span>, <span><strong>clssi
virtual</strong></span>, … Per poter lavorare efficacemente con il C++ avrete
bisogno di un buon libro di riferimento, proprio come succede con il C.
Avrete inoltre bisogno di sapere come il C++ viene usato nel vostro
particolare dominio di lavoro. Gli standard, l’approccio globale, i
trucchi, i tipici problemi che si incontrano e le loro soluzioni… La
migliore referenza sono ovviamente i libri scritti da Bjarne Stroutrup
(non ricordo quale io abbia letto). Il seguente libro contiene
praticamente ogni dettaglio del C e C++, ed e’ costruito in modo molto
simile a questo testo e contiene un CD:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Jamsa's C/C++ Programmer's Bible
&amp;copyright; 1998 Jamsa Press
Las Vegas, United States

French edition:
C/C++ La Bible du programmeur
Kris Jamsa, Ph.D - Lars Klander 
France : Editions Eyrolles
www.eyrolles.com
Canada : Les Editions Reynald Goulet inc.
www.goulet.ca
ISBN 2-212-09058-7
</code></pre></div></div>

<p>Questo e’ ormai obsoleto ed e’ ora:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>It has been obsoleted and is now:
Jamsa's C/C++/C# Programmer's Bible
Onword Press 
</code></pre></div></div>

<p>Altre referenze:</p>

<p><span><strong>accu:</strong></span><a href="www.accu.org/bookreviews/public/reviews/0hr/index.htm">www.accu.org/bookreviews/public/reviews/0hr/index.htm</a></p>

<p>CoderSource.net: <a href="www.codersource.net/">www.codersource.net/</a></p>

<p>C++ Guide:
<a href="google-styleguide.googlecode.com/svn/trunk/cppguide.xml">google-styleguide.googlecode.com/svn/trunk/cppguide.xml</a></p>

<p>C++ Reference:
<a href="fresh2refresh.com/c/c-language-history">fresh2refresh.com/c/c-language-history</a></p>

<p>A similar tutorial for Ada is available at
<a href="www.adahome.com/Ammo/cpp2ada.html">www.adahome.com/Ammo/cpp2ada.html</a></p>

<p>A Haskell tutorial by a C programmer:
<a href="learnyouahaskell.com">learnyouahaskell.com</a></p>

<p>Desidero ringraziare Didier Bizzarri, Toni Ronkko,
Fr<span>é</span>d<span>é</span>ric Cloth, Jack Lam, Morten Brix
Pedersen, Elmer Fittery, Ana Yuseepi, William L. Dye, Bahjat F. Qaqish,
Muthukumar Veluswamy, Marco Cimarosti, Jarrod Miller, Nikolaos Pothitos,
Ralph Wu, Dave Abercrombie, Alex Pennington, Scott Marsden, Robert
Krten, Dave Panter, Cihat Imamoglu, Bohdan Zograf, David L. Markowitz,
Marko Pozner, Filip Zaludek, Kevin Wheeler e Patrick Einheber per la
loro ispirazione, suggerimenti, aiuti, dati, controllo sui bug,
referenze, miglioramento della versione inglese e traduzione.</p>

<p>Eric Brasseur - 23 Febbraio 1998 fino al 25 Dicembre 2016</p>

      </div>
    </div>

    <div class="tag-list">
      
      
      
      <a class="tag-chip" href="/tags#paolo_cap"><div class="chip z-depth-1">Paolo</div></a>
      
      
      
      <a class="tag-chip" href="/tags#c-c_cap"><div class="chip z-depth-1">C/C++</div></a>
      
    </div>
    <style type="text/css">
.related-posts{
  border: 3px dotted #2e87e7;
  border-radius: 5px;
  margin: 20px 0;
  padding: 10px 10px 0 10px;
}
.related-posts span{
  font-size: 130%;
  font-weight: 500;
  color: #2e87e7;
}
.related-posts ul{
  margin-top: 5px!important;
}
.thi-icon{
  float: left;
  line-height: inherit;
  margin-right: 5px;
  margin-left: 2px;
  color: #2e87e7;
}
</style>

<div class="related-posts">
  <i class="material-icons thi-icon">grade</i><span>May you like PA?</span>
  
  <ul>
    
    
      
      
        
      
        
      
        
      
    
      
      
        
          <li>
            <a href="/OpenMP-18-19">
              OpenMp, Calcolo Parallelo, UNIMIB, a.a. 2018-2019
            </a>
            <small>09 Feb 2020</small>
          </li>
          
          
    
      
      
        
          <li>
            <a href="/MPI-18-19">
              MPI, Calcolo Parallelo, UNIMIB, a.a. 2018-2019
            </a>
            <small>09 Feb 2020</small>
          </li>
          
          
    
      
      
        
          <li>
            <a href="/Cuda-18-19">
              CUDA, Calcolo Parallelo, UNIMIB DISCo 2018-2019
            </a>
            <small>09 Feb 2020</small>
          </li>
          
          
    
      
      
        
          <li>
            <a href="/categorie">
              Prova slug italiano
            </a>
            <small>19 Jan 2020</small>
          </li>
          
          
    

    
    
  </ul>
</div>


    		
 
  </div>
</main>

	<script src="/assets/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript">
  jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
      //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
      offset_opacity = 1200,
      //duration of the top scrolling animation (in ms)
      scroll_top_duration = 700,
      //grab the "back to top" link
      $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
      ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
      // if( $(this).scrollTop() > offset_opacity ) { 
      //  $back_to_top.addClass('cd-fade-out');
      // }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
      event.preventDefault();
      $('body,html').animate({
        scrollTop: 0 ,
        }, scroll_top_duration
      );
    });

  });
</script>
<style type="text/css">
.cd-top {
  display: inline-block;
  height: 50px;
  width: 50px;
  position: fixed;
  bottom: 2%;
  right: 2%;
  border-radius: 40px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
  /* image replacement properties */
  overflow: hidden;
  text-indent: 100%;
  white-space: nowrap;
  background: #bbb url(/images/cd-top-arrow.svg) no-repeat center 50%;
  visibility: hidden;
  opacity: 0;
  -webkit-transition: opacity .3s 0s, visibility 0s .3s;
  -moz-transition: opacity .3s 0s, visibility 0s .3s;
  transition: opacity .3s 0s, visibility 0s .3s;
}
.cd-top.cd-is-visible, .cd-top.cd-fade-out, .no-touch .cd-top:hover {
  -webkit-transition: opacity .3s 0s, visibility 0s 0s;
  -moz-transition: opacity .3s 0s, visibility 0s 0s;
  transition: opacity .3s 0s, visibility 0s 0s;
}
.cd-top.cd-is-visible {
  /* the button becomes visible */
  visibility: visible;
  opacity: 1;
}
.cd-top.cd-fade-out {
  /* if the user keeps scrolling down, the button is out of focus and becomes less visible */
  opacity: .5;
}
.no-touch .cd-top:hover {
  background-color: #e86256;
  opacity: 1;
}
</style>

<a href="#0" class="cd-top">Top</a>
	<footer class="page-footer light-blue darken-4">  
  <div class="footer-copyright">
    <div class="container text-white">
     <a href="">4Phycs</a> &#xA9; 2020 Inherited from <a href="https://shawnteoh.github.io/matjek/">MatJeck</a>.
    </div>
  </div>
</footer>

<script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/js/materialize.min.js"></script>


  
    <script src="/assets/js/post.js"></script>
  





<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})
  (window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>

<script src="/assets/js/main.js"></script>

        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-158698892-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158698892-1');
</script>

</body>
</html>
